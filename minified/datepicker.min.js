class Datepicker{constructor(t){if(!t||void 0===typeof t)throw"Error: Datepicker.js options object must be defined, with at least options.containerElement.";if(void 0===t.containerElement||!t.containerElement)throw"Error: you must specify a container element in the Datepicker.js options object!";Element.prototype.hideDatepickerEl=function(){this.style.visibility="hidden"},Element.prototype.showDatepickerEl=function(){this.style.visibility=""},Element.prototype.hideContainer=function(){this.style.display="none"},Element.prototype.showContainer=function(){this.style.display="block"},Element.prototype.hideCalendar=function(){this.style.display="none"},Element.prototype.showCalendar=function(){this.style.display="grid"},Element.prototype.hidePresetMenu=function(){this.style.display="none"},Element.prototype.showPresetMenu=function(){this.style.display="flex"},this.options=t,this.max="object"==typeof this.options.max&&this.options.max,this.min="object"==typeof this.options.min&&this.options.min,this.containerElement=t.containerElement,this.containerElement.classList.add("DatepickerContainer"),this.timePicker=void 0===this.options.timePicker||this.options.timePicker,this.presetMenu=void 0===this.options.presetMenu||this.options.presetMenu,this.menuOptions=void 0!==this.options.menuOptions?this.options.menuOptions:[],this.autoClose=void 0!==this.options.autoClose&&this.options.autoClose,this.singleDate=void 0!==this.options.singleDate&&this.options.singleDate,this.clearDates=void 0!==this.options.clearDates&&this.options.clearDates,this.leadingTrailingDates=void 0===this.options.leadingTrailingDates||this.options.leadingTrailingDates,this.militaryTime=void 0!==this.options.militaryTime&&this.options.militaryTime,this.format=this.options.format||(this.timePicker?this.militaryTime?"MM/DD/YYYY HH:mm:ss":"MM/DD/YYYY hh:mm A":"MM/DD/YYYY"),this.startDateLabel=this.singleDate?void 0!==this.options.startDateLabel?this.options.startDateLabel:"Date: ":void 0!==this.options.startDateLabel?this.options.startDateLabel:"Start Date: ",this.endDateLabel=void 0!==this.options.endDateLabel?this.options.endDateLabel:"End Date: ",this.max&&moment(this.max).unix()<moment().unix()?this.moment=moment(moment(this.max),this.format,!0):this.moment=moment(moment(),this.format,!0),this.min&&moment(this.min).unix()>moment().unix()?this.moment=moment(moment(this.min),this.format,!0):this.moment=moment(moment(),this.format,!0),this.onChange=void 0!==this.options.onChange?this.options.onChange:function(){},this.onSubmit=void 0!==this.options.onSubmit?this.options.onSubmit:function(){},this.onClose=void 0!==this.options.onClose?this.options.onClose:function(){},this.drawCalendar=this.drawCalendar.bind(this),this.dayClick=this.dayClick.bind(this),this.nextMonth=this.nextMonth.bind(this),this.lastMonth=this.lastMonth.bind(this),this.highlightDates=this.highlightDates.bind(this),this.flashWarning=this.flashWarning.bind(this),this.toggleAMPM=this.toggleAMPM.bind(this),this.clickAMPM=this.clickAMPM.bind(this),this.inputElement=document.createElement("div"),this.drawInputElement=this.drawInputElement.bind(this),this.openCalendar=this.openCalendar.bind(this),this.closeCalendar=this.closeCalendar.bind(this),this.openPresetMenu=this.openPresetMenu.bind(this),this.closePresetMenu=this.closePresetMenu.bind(this),this.resetCalendar=this.resetCalendar.bind(this),this.reset=this.reset.bind(this),this.value=this.value.bind(this),this.startDate=this.startDate.bind(this),this.endDate=this.endDate.bind(this),this.outsideCalendarClick=this.outsideCalendarClick.bind(this),this.isOutsideCalendar=this.isOutsideCalendar.bind(this),this.leadingTrailing=this.leadingTrailing.bind(this),this.defaultDatesValid=this.defaultDatesValid.bind(this),this.drawPresetMenu=this.drawPresetMenu.bind(this),this.hourChange=this.hourChange.bind(this),this.upDownClick=this.upDownClick.bind(this),this.createHourUpDown=this.createHourUpDown.bind(this),this.minuteBuild=this.minuteBuild.bind(this),this.drawStartTimePicker=this.drawStartTimePicker.bind(this),this.drawEndTimePicker=this.drawEndTimePicker.bind(this),this.snapTo=this.snapTo.bind(this),this.toAmPm=this.toAmPm.bind(this),this.timeValid=this.timeValid.bind(this),this.dates=[],this.defaults=void 0===this.options.defaults||this.options.defaults,this.defaultsValid=this.defaultDatesValid(),this.defaultsValid&&this.defaults&&(this.defaults=[],this.defaults[0]&&(this.defaults[0]=!("object"!=typeof this.options.defaults||!this.options.defaults.length)&&moment(this.options.defaults[0]).format(this.format)),this.defaults[0]&&(this.dates[0]=this.defaults[0]),this.singleDate||(this.defaults[1]="object"==typeof this.options.defaults&&2===this.options.defaults.length&&moment(this.options.defaults[1]).format(this.format),this.defaults[1]&&(this.dates[1]=this.defaults[1]))),this.timeElements={},this.startHour="12",this.startMinute="00",this.startAmPm="PM",this.endHour="12",this.endMinute="00",this.endAmPm="PM",this.drawCalendar(),this.drawInputElement(),this.presetMenu&&(this.drawPresetMenu(),this.closePresetMenu()),this.calendarPlacement(),this.calendarElement.hideCalendar()}flashWarning(t,e,i){let s=t.closest("[class$='TimeElement']");s&&(s.classList.add("flashWarning"),setTimeout(function(){s.classList.remove("flashWarning"),i()},1e3*e))}toggleAMPM(t){let e="startHour"===t?this.startAmPm:this.endAmPm,i="startHour"===t?this.timeElements.startam:this.timeElements.endam,s="startHour"===t?this.timeElements.startpm:this.timeElements.endpm;"PM"===e?i.dispatchEvent(new Event("click")):s.dispatchEvent(new Event("click"))}clickAMPM(t){let e=t.target;Array.from(e.parentElement.children).forEach(function(t){t==e?t.setAttribute("SELECTED","true"):t.removeAttribute("SELECTED")}),e.parentElement.parentElement.classList.contains("startTimeElement")?this.startAmPm=e.classList.contains("am")?"AM":"PM":this.endAmPm=e.classList.contains("am")?"AM":"PM",this.setTime(!1,e)}drawInputElement(){this.inputElement.innerHTML="",this.inputElement.setAttribute("class","launch");let t=document.createElement("div"),e=document.createElement("div"),i=document.createElement("div"),s=document.createElement("div"),n=document.createElement("div"),a=document.createElement("div");e.innerHTML=this.startDateLabel,t.setAttribute("class","startBlock"),e.setAttribute("class","heading"),t.appendChild(e),t.appendChild(n),n.innerHTML=moment(this.dates[0]).format(this.format),n.setAttribute("class","date"),this.inputElement.appendChild(t),i.setAttribute("class","heading"),this.singleDate||(i.innerHTML=this.endDateLabel,s.appendChild(i),a.setAttribute("class","date"),s.appendChild(a),s.setAttribute("class","endBlock"),this.inputElement.appendChild(s)),this.dates[0]?n.innerHTML=moment(this.dates[0]).format(this.format):this.timePicker?n.innerHTML=" --/--/----  --:-- ":n.innerHTML=" --/--/---- ",this.singleDate||(this.dates[1]&&void 0!==typeof this.dates[1]?a.innerHTML=moment(this.dates[1]).format(this.format):this.timePicker?a.innerHTML=" --/--/----  --:-- ":a.innerHTML=" --/--/---- "),this.inputElement.addEventListener("click",function(t){this.openCalendar()}.bind(this)),this.containerElement.appendChild(this.inputElement)}drawCalendar(){this.firstDayOfMonth=this.moment.startOf("month").format("dddd"),this.lastDayOfMonth=this.moment.endOf("month").format("dddd");let t=this.nextMonth,e=this.lastMonth,i=this.dayClick,s=document.createElement("div"),n=document.createElement("div");n.setAttribute("style","grid-column-start: 2; grid-column-end: 5;");let a=document.createElement("div");a.setAttribute("style","grid-column-start: 5; grid-column-end: 7;");let r=document.createElement("select");r.setAttribute("name","months"),r.setAttribute("class","datepicker-month-select"),r.setAttribute("aria-label","datepicker-month-select"),this.moment._locale._months.forEach(function(t,e){let i=document.createElement("option");i.innerHTML=t,i.value=e+1,t===this.moment._locale._months[this.moment.month()]&&(i.selected=!0),r.appendChild(i)}.bind(this)),r.addEventListener("change",function(t){this.moment.month(r.value-1),this.snapTo()}.bind(this));let l=document.createElement("input");l.setAttribute("type","number"),l.setAttribute("name","year"),l.setAttribute("class","datepicker-year-input"),l.setAttribute("aria-label","datepicker-year-input"),l.value=this.moment.year(),l.addEventListener("change",function(t){parseInt(l.value)<1900||parseInt(l.value)>2200?l.value=this.moment.year():(this.moment.year(l.value),this.snapTo())}.bind(this));let h=document.createElement("span");h.innerHTML="&#43;",h.setAttribute("class","increase-year-button"),h.setAttribute("aria-label","Increase Year Button"),h.setAttribute("role","button"),h.addEventListener("click",function(t){l.stepUp(),l.dispatchEvent(new Event("change"))}.bind(this));let d=document.createElement("span");if(d.innerHTML="&#x2212;",d.setAttribute("class","decrease-year-button"),d.setAttribute("aria-label","Decrease Year Button"),d.setAttribute("role","button"),d.addEventListener("click",function(t){l.stepDown(),l.dispatchEvent(new Event("change"))}.bind(this)),this.menuIconContainer=document.createElement("div"),this.menuIconContainer.setAttribute("style","grid-column-start: 1; grid-column-end: 2; background-color: transparent !important;"),this.menuIconContainer.setAttribute("aria-label","Preset Menu Button"),this.menuIconContainer.setAttribute("role","menu"),this.presetMenu){let t=document.createElement("span");t.innerHTML="&#9776;",t.classList.add("calendarHamburger"),this.menuIconContainer.addEventListener("click",function(t){this.menuIconContainer.classList.contains("open")?(this.closePresetMenu(),this.menuIconContainer.classList.remove("open")):(this.openPresetMenu(),this.menuIconContainer.classList.add("open"))}.bind(this)),this.menuIconContainer.appendChild(t)}let o=document.createElement("div");o.classList.add("leftArrow"),o.setAttribute("style","background-color: transparent !important;"),o.setAttribute("aria-label","Previous Month Button"),o.setAttribute("role","navigation"),o.innerHTML="&#5130;",o.addEventListener("click",e.bind(this));let m=document.createElement("div");m.classList.add("rightArrow"),m.setAttribute("style","background-color: transparent !important;"),m.setAttribute("aria-label","Next Month Button"),m.setAttribute("role","navigation"),m.innerHTML="&#5125;",m.addEventListener("click",t.bind(this)),n.appendChild(o),n.appendChild(r),n.appendChild(m),a.appendChild(d),a.appendChild(l),a.appendChild(h),n.classList.add("monthHeader"),a.classList.add("yearHeader"),s.classList.add("grid-container");let u=document.createElement("div");u.setAttribute("style","grid-column-start: 7; grid-column-end: 8; background-color: transparent !important;"),u.setAttribute("aria-label","Preset Menu Button"),u.setAttribute("role","button");let c=document.createElement("span");c.innerHTML="&#10006;",c.classList.add("close-calendar-button"),u.addEventListener("click",function(t){this.closeCalendar()}.bind(this)),u.appendChild(c),s.appendChild(this.menuIconContainer),s.appendChild(n),s.appendChild(a),s.appendChild(u),this.moment._locale._weekdaysShort.forEach(function(t){let e=document.createElement("div");switch(e.classList.add(t),e.classList.add("dayHeader"),t){case"Sun":e.setAttribute("aria-label","Sunday");break;case"Mon":e.setAttribute("aria-label","Monday");break;case"Tue":e.setAttribute("aria-label","Tuesday");break;case"Wed":e.setAttribute("aria-label","Wednesday");break;case"Thu":e.setAttribute("aria-label","Thursday");break;case"Fri":e.setAttribute("aria-label","Friday");break;case"Sat":e.setAttribute("aria-label","Saturday")}e.innerHTML=" "+t+" ",s.appendChild(e)});let p=Array.from(Array(this.moment.daysInMonth()).keys()),E=this.leadingTrailing(),f=this.moment._locale._weekdays.indexOf(this.firstDayOfMonth)+1,g=this.moment._locale._weekdays.indexOf(this.lastDayOfMonth)+1;if(this.leadingTrailingDates)for(let t=f-1;t>0;t--){let e=document.createElement("div");e.classList.add("prev-month-day-"+parseInt(E.trailing[t]+1)),e.classList.add("leading-trailing-day"),e.innerHTML=parseInt(E.trailing[t])+1,e.setAttribute("aria-label",parseInt(E.trailing[t]+1)+""),0===t&&e.classList.add("grid-column-start:0;"),s.appendChild(e)}let M=!!this.max&&moment(this.max).unix(),b=!!this.min&&moment(this.min).unix();if(p.forEach(function(t){let e=document.createElement("div");e.classList.add("day-"+(parseInt(t)+1)),e.classList.add("day"),e.innerHTML=parseInt(t)+1;let n=moment(this.moment.format("MM")+"/"+parseInt(t+1)+"/"+this.moment.format("YYYY")).format(this.format);e.setAttribute("role","button"),e.setAttribute("aria-label",n),e.value=n;let a=moment(e.value).unix();M&&a>M?(e.classList.add("disabled"),e.setAttribute("disabled",!0)):b&&a<b?(e.classList.add("disabled"),e.setAttribute("disabled",!0)):e.addEventListener("click",i.bind(this,e)),s.appendChild(e)}.bind(this)),this.leadingTrailingDates)for(let t=1;t<8-g;t++){let e=document.createElement("div");e.classList.add("next-month-day-"+t),e.classList.add("leading-trailing-day"),e.innerHTML=t,e.setAttribute("aria-label","day-"+t+"-next-month"),0===t&&e.classList.add("grid-column-start:"+g+";"),s.appendChild(e)}let D="grid-column-start: "+f+";";s.querySelector(".day-1").setAttribute("style",D),this.startDateElement=document.createElement("div"),this.startDateHeader=document.createElement("div"),this.startDateHeader.innerHTML="<b>"+this.startDateLabel+"</b>",this.startDateContainer=document.createElement("div"),this.startDateContainer.classList.add("startDateElement"),this.endDateElement=document.createElement("div"),this.endDateHeader=document.createElement("div"),this.endDateHeader.innerHTML="<b>"+this.endDateLabel+"</b>",this.endDateContainer=document.createElement("div"),this.endDateContainer.classList.add("endDateElement"),this.singleDate?(this.startDateContainer.setAttribute("style","grid-column-start: 1; grid-column-end: 8;"),this.timePicker?this.startDateElement.innerHTML="--/--/----  --:--":this.startDateElement.innerHTML="--/--/----"):(this.startDateContainer.setAttribute("style","grid-column-start: 1; grid-column-end: 4;"),this.timePicker?this.startDateElement.innerHTML="--/--/----  --:--":this.startDateElement.innerHTML="--/--/----"),this.startDateContainer.appendChild(this.startDateHeader),this.startDateContainer.appendChild(this.startDateElement),s.appendChild(this.startDateContainer),this.calendarElement=s,this.timePicker?(this.drawStartTimePicker(),this.singleDate||(this.timePicker?(this.endDateContainer.setAttribute("style","grid-column-start: 1; grid-column-end: 4;"),this.endDateElement.innerHTML="--/--/----  --:--"):(this.endDateContainer.setAttribute("style","grid-column-start: 5; grid-column-end: 8;"),this.endDateElement.innerHTML="--/--/----"),this.endDateContainer.appendChild(this.endDateHeader),this.endDateContainer.appendChild(this.endDateElement),this.calendarElement.appendChild(this.endDateContainer),this.drawEndTimePicker())):this.singleDate||(this.timePicker?(this.endDateContainer.setAttribute("style","grid-column-start: 1; grid-column-end: 4;"),this.endDateElement.innerHTML="--/--/----  --:--"):(this.endDateContainer.setAttribute("style","grid-column-start: 5; grid-column-end: 8;"),this.endDateElement.innerHTML="--/--/----"),this.endDateContainer.appendChild(this.endDateHeader),this.endDateContainer.appendChild(this.endDateElement),this.calendarElement.appendChild(this.endDateContainer));let v=document.createElement("button");v.classList.add("cancelButton"),v.type="cancel",v.style.gridColumnStart=1,v.style.gridColumnEnd=3,v.addEventListener("click",function(t){this.clearDates?this.resetCalendar():this.closeCalendar()}.bind(this)),this.clearDates?!0===this.defaults||this.defaults.length?v.innerHTML="&#x21BA;":v.innerHTML="&#10006;":(v.innerHTML="&#10006;",v.style.backgroundColor="grey"),s.appendChild(v);let C=document.createElement("button");C.classList.add("submitButton"),C.innerHTML="&#10004;",C.type="submit",C.style.gridColumnStart=3,C.style.gridColumnEnd=8,C.addEventListener("click",function(t){this.onSubmit(),this.closeCalendar()}.bind(this)),s.appendChild(C),this.containerElement.appendChild(s),document.addEventListener("click",function(t){this.outsideCalendarClick(t)}.bind(this))}drawPresetMenu(){this.presetMenuContainer=document.createElement("div"),this.presetMenuContainer.setAttribute("class","presetMenuContainer");let t=document.createElement("ul"),e=new Date,i=[];if(i=this.singleDate?[{title:"Yesterday",values:[moment(e).add(-1,"day").hour(0).minute(0)]},{title:"Today",values:[moment(e).hour(0).minute(0)]},{title:"Tomorrow",values:[moment(e).add(1,"day").hour(0).minute(0)]}]:[{title:"This Week",values:[moment(e).startOf("week"),moment(e).endOf("week")]},{title:"Next Week",values:[moment(e).add(1,"week").startOf("week"),moment(e).add(1,"week").endOf("week")]},{title:"Last Week",values:[moment(e).add(-1,"week").startOf("week"),moment(e).add(-1,"week").endOf("week")]},{title:"This Month",values:[moment(e).startOf("month"),moment(e).endOf("month")]},{title:"Next Month",values:[moment(e).add(1,"month").startOf("month"),moment(e).add(1,"month").endOf("month")]},{title:"Last Month",values:[moment(e).add(-1,"month").startOf("month"),moment(e).add(-1,"month").endOf("month")]},{title:"This Year",values:[moment(e).startOf("year"),moment(e).endOf("year")]},{title:"Next Year",values:[moment(e).add(1,"year").startOf("year"),moment(e).add(1,"year").endOf("year")]},{title:"Last Year",values:[moment(e).add(-1,"year").startOf("year"),moment(e).add(-1,"year").endOf("year")]}],void 0!==this.menuOptions&&this.menuOptions.length>0){let t=!!this.max&&moment(this.max).unix(),e=!!this.min&&moment(this.min).unix();for(let s=0;s<this.menuOptions.length;s++){let n=moment(this.menuOptions[s].values[0]).unix(),a=moment(this.menuOptions[s].values[1]).unix();t&&t<a||e&&e>n?console.warn('Datepicker.js: Preset menu option: "'+this.menuOptions[s].title+'" lies partially or entirely outside max/min allowed and was disabled.'):i.push(this.menuOptions[s])}}for(let e of i){let i=!!this.max&&moment(this.max).unix(),s=!!this.min&&moment(this.min).unix(),n=moment(e.values[0]).unix(),a=moment(e.values[1]).unix();if(i&&i<a||s&&s>n)console.warn('Datepicker.js: Preset menu option: "'+e.title+'" lies partially or entirely outside max/min allowed and was disabled.');else{let i=document.createElement("li");i.setAttribute("class",e.title+"-menu-option"),i.innerHTML=e.title,i.addEventListener("click",function(t){this.dates.length=0,this.highlightDates(),this.dates[0]=e.values[0],this.singleDate||(this.dates[1]=e.values[1]);let i=this.onChange;this.onChange=function(){},this.highlightDates(),this.snapTo(this.dates[0],!0),this.timePicker?this.setTime(!0):(this.startDateElement.innerHTML=moment(this.dates[0]).format(this.format),this.singleDate||(this.endDateElement.innerHTML=moment(this.dates[1]).format(this.format))),this.drawInputElement(),this.onChange=i,this.onChange(),this.menuIconContainer.classList.remove("open")}.bind(this)),t.appendChild(i)}}let s=document.createElement("div");s.setAttribute("style","background-color: transparent !important;"),s.setAttribute("aria-label","Preset Menu Close Button"),s.setAttribute("role","button");let n=document.createElement("span");n.innerHTML="&#10006;",n.classList.add("close-preset-menu"),s.addEventListener("click",function(t){this.closePresetMenu(),this.menuIconContainer.classList.remove("open")}.bind(this)),s.appendChild(n),this.presetMenuContainer.appendChild(s),this.presetMenuContainer.appendChild(t),this.calendarElement.appendChild(this.presetMenuContainer)}hourChange(t){let e=t.target==document.querySelector("input#endHour")?this.timeElements.endHourValueEl.value:this.timeElements.startHourValueEl.value;(e=this.militaryTime?parseInt(e):this.toMilitary(parseInt(e)))>23?e=0:e<1&&(e=23),e<10&&this.militaryTime&&(e="0"+e),e=this.militaryTime?e:this.toAmPm(e),t.target==document.querySelector("input#endHour")?this.timeElements.endHourValueEl.value=e:this.timeElements.startHourValueEl.value=e,!this.militaryTime&&t.fromClick&&("up"==t.fromClick&&12==e||"down"==t.fromClick&&11==e)?this.toggleAMPM(t.target.id):this.setTime(!1,t.target)}upDownClick(t,e,i){let s=t.value;s%i!=0&&0!==parseInt(s)&&(i=1),t.value="up"==e?parseInt(s)+i:parseInt(s)-i;let n=new Event("change");n.fromClick=e,t.dispatchEvent(n)}createHourUpDown(t){let e=document.createElement("span");return e.classList.add("TimeUpDown"),e.innerHTML="<div>&#9650;</div><div>&#9660;</div>",e.querySelectorAll("div")[0].onclick=function(){this.upDownClick(t,"up",1)}.bind(this),e.querySelectorAll("div")[1].onclick=function(){this.upDownClick(t,"down",1)}.bind(this),e}minuteBuild(t,e){let i=document.createElement("div");i.innerHTML=":",i.classList.add("timeColon"),i.style.gridColumn="3 / span 1",t.appendChild(i),parseInt(e)<10&&(e="0"+parseInt(e));let s=document.createElement("div");s.classList.add("minute"),s.innerHTML="<input type='number' min='1' max='59' value='"+e+"' />",s.style.gridColumn="4 / span 2";let n=s.querySelector("input");t.classList.contains("startTimeElement")?this.timeElements.startMinuteValueEl=n:this.timeElements.endMinuteValueEl=n;let a=function(e){let i=parseInt(n.value),s=null;switch(i>59?(i=0,s="up"):i<0&&(i=45,s="down"),i<10&&(i="0"+i),n.value=i,s){case"up":t.querySelectorAll(".hour > .TimeUpDown > div")[0].dispatchEvent(new Event("click"));break;case"down":t.querySelectorAll(".hour > .TimeUpDown > div")[1].dispatchEvent(new Event("click"));break;default:this.setTime(!1,n)}}.bind(this);n.addEventListener("change",a),n.addEventListener("click",function(){setTimeout(function(){n.select()},100)});let r=document.createElement("span");return r.classList.add("TimeUpDown"),r.innerHTML="<div>&#9650;</div><div>&#9660;</div>",r.querySelectorAll("div")[0].onclick=function(){this.upDownClick(n,"up",15)}.bind(this),r.querySelectorAll("div")[1].onclick=function(){this.upDownClick(n,"down",15)}.bind(this),s.appendChild(r),s}ampmBuild(t){if(!this.militaryTime){let e,i=document.createElement("div");i.classList.add("ampm"),i.innerHTML="",i.style.gridColumn="6 / span 1",t.classList.contains("startTimeElement")?(this.timeElements.startampm=i,e=this.startAmPm):(this.timeElements.endampm=i,e=this.endAmPm);let s=document.createElement("div");s.classList.add("am"),s.innerHTML="AM",s.addEventListener("click",this.clickAMPM),i.appendChild(s);let n=document.createElement("div");n.classList.add("pm"),n.innerHTML="PM",n.addEventListener("click",this.clickAMPM),i.appendChild(n),"PM"===e?(n.setAttribute("SELECTED","true"),s.removeAttribute("SELECTED")):(s.setAttribute("SELECTED","true"),n.removeAttribute("SELECTED")),t.classList.contains("startTimeElement")?(this.timeElements.startam=s,this.timeElements.startpm=n):(this.timeElements.endam=s,this.timeElements.endpm=n),t.appendChild(i)}}drawStartTimePicker(){let t=document.createElement("div");t.classList.add("startTimeElement"),this.singleDate?(t.style.gridColumnStart=1,t.style.gridColumnEnd=8):(t.style.gridColumnStart=4,t.style.gridColumnEnd=8),this.militaryTime||(this.startHour=this.toAmPm(parseInt(this.startHour)));let e=document.createElement("div");e.classList.add("hour"),e.innerHTML="<input id='startHour' type='number' min='1' max='23' value='"+this.startHour+"' />",e.style.gridColumn="1 / span 2";let i=e.querySelector("#startHour");this.timeElements.startHourValueEl=i,i.addEventListener("change",this.hourChange),i.addEventListener("click",function(){setTimeout(function(){i.select()},100)});let s=this.createHourUpDown(i);e.appendChild(s),t.appendChild(e);let n=this.minuteBuild(t,this.startMinute);t.appendChild(n),this.ampmBuild(t),this.calendarElement.appendChild(t)}drawEndTimePicker(){if(!this.singleDate){let t=document.createElement("div");t.classList.add("endTimeElement"),t.style.gridColumnStart=4,t.style.gridColumnEnd=8,this.militaryTime||(this.endHour=this.toAmPm(parseInt(this.endHour)));let e=document.createElement("div");e.classList.add("hour"),e.innerHTML="<input id='endHour' type='number' min='1' max='23' value='"+this.endHour+"' />",e.style.gridColumn="1 / span 2";let i=e.querySelector("#endHour");this.timeElements.endHourValueEl=i,i.addEventListener("change",this.hourChange),i.addEventListener("click",function(){setTimeout(function(){i.select()},100)});let s=this.createHourUpDown(i);e.appendChild(s),t.appendChild(e);let n=this.minuteBuild(t,this.endMinute);t.appendChild(n),this.ampmBuild(t),this.calendarElement.appendChild(t)}}leadingTrailing(){let t=1===parseInt(this.moment.month())||0===parseInt(this.moment.month())?12:parseInt(this.moment.month()),e=1===parseInt(this.moment.month())||0===parseInt(this.moment.month())?parseInt(this.moment.year())-1:parseInt(this.moment.year()),i=parseInt(moment(e+"-"+t,"YYYY-MM").daysInMonth()),s=[],n=[];for(let t=1;t<8;t++)n.push(i),i--,s.push(t);return new Object({leading:s,trailing:n})}highlightDates(){let t=this.containerElement.querySelectorAll(".day");this.dates.length>0&&2===this.dates.length?t.forEach(function(t){let e=moment(t.value).format("MM/DD/YYYY"),i=moment(this.dates[0]).format("MM/DD/YYYY"),s=moment(this.dates[1]).format("MM/DD/YYYY"),n=moment(t.value).format("X"),a=moment(this.dates[0]).format("X"),r=moment(this.dates[1]).format("X");i===e&&(t.classList.add("active"),t.setAttribute("aria-pressed","true")),s===e&&(t.classList.add("active"),t.setAttribute("aria-pressed","true")),n>a&&n<r&&t.classList.add("highlighted")}.bind(this)):t.forEach(function(t){let e=moment(t.value).format("MM/DD/YYYY");moment(this.dates[0]).format("MM/DD/YYYY")===e?(t.classList.add("active"),t.setAttribute("aria-pressed","true")):(t.classList.contains("active")&&(t.classList.remove("active"),t.setAttribute("aria-pressed","false")),t.classList.contains("highlighted")&&t.classList.remove("highlighted"))}.bind(this))}timeValid(){if(2===this.dates.length&&!this.singleDate&&this.timePicker){this.startHour=parseInt(this.timeElements.startHourValueEl.value),this.startMinute=parseInt(this.timeElements.startMinuteValueEl.value),this.endHour=parseInt(this.timeElements.endHourValueEl.value),this.endMinute=parseInt(this.timeElements.endMinuteValueEl.value),this.militaryTime||("PM"===this.startAmPm&&(this.startHour=this.toMilitary(this.timeElements.startHourValueEl.value)),"PM"===this.endAmPm&&(this.endHour=this.toMilitary(this.timeElements.endHourValueEl.value)),12===parseInt(this.timeElements.startHourValueEl.value)&&"AM"===this.startAmPm&&(this.startHour=0),12===parseInt(this.timeElements.endHourValueEl.value)&&"AM"===this.endAmPm&&(this.endHour=0));let t=moment(this.dates[0]).day()===moment(this.dates[1]).day(),e=moment(this.dates[0]).month()===moment(this.dates[1]).month(),i=moment(this.dates[0]).year()===moment(this.dates[1]).year();if(t&&e&&i){return moment(this.dates[0]).hour(this.startHour).minute(this.startMinute)<=moment(this.dates[1]).hour(this.endHour).minute(this.endMinute)}return!0}return!0}defaultDatesValid(){if(void 0===this.defaults||!this.defaults)return!1;this.max&&moment(this.defaults[0])>moment(this.max)&&(this.defaults[0]=!1,console.warn("Datepicker.js - WARNING: Tried to set a default start date greater than max, default start date will not be set.")),this.min&&moment(this.defaults[0])<moment(this.min)&&(this.defaults[0]=!1,console.warn("Datepicker.js - WARNING: Tried to set a default start date less than min, default start datewill not be set.")),this.max&&moment(this.defaults[1])>moment(this.max)&&(this.defaults[1]=!1,console.warn("Datepicker.js - WARNING: Tried to set a default end date greater than max, default end date will not be set.")),this.min&&moment(this.defaults[1])<moment(this.min)&&(this.defaults[1]=!1,console.warn("Datepicker.js - WARNING: Tried to set a default end date less than min, default end datewill not be set."))}setTime(t=!1,e=null){if(this.timePicker){if(this.startHour=parseInt(this.timeElements.startHourValueEl.value),this.startMinute=parseInt(this.timeElements.startMinuteValueEl.value),this.singleDate||(this.endHour=parseInt(this.timeElements.endHourValueEl.value),this.endMinute=parseInt(this.timeElements.endMinuteValueEl.value)),t){let t=moment(this.dates[0]).hours();t||(t=12);let e=this.singleDate?"":moment(this.dates[1]).hours();e||(e=12),this.timeElements.startHourValueEl.value=this.militaryTime?t:this.toAmPm(t),this.timeElements.startMinuteValueEl.value=this.dates[0]?moment(this.dates[0]).minutes()<10?moment(this.dates[0]).minutes()+"0":moment(this.dates[0]).minutes():this.timeElements.startMinuteValueEl.value,this.singleDate||(this.timeElements.endHourValueEl.value=this.militaryTime?e:this.toAmPm(e),this.timeElements.endMinuteValueEl.value=this.dates[1]?moment(this.dates[1]).minutes()<10?moment(this.dates[1]).minutes()+"0":moment(this.dates[1]).minutes():this.timeElements.endMinuteValueEl.value,this.endHour=e,this.endMinute=parseInt(this.timeElements.endMinuteValueEl.value)),this.startHour=t,this.startMinute=parseInt(this.timeElements.startMinuteValueEl.value),this.militaryTime||(this.singleDate||(this.endAmPm=this.endHour>12?"PM":"AM","PM"===this.endAmPm?setTimeout(function(){this.timeElements.endpm.click()}.bind(this),500):setTimeout(function(){this.timeElements.endam.click()}.bind(this),500)),this.startAmPm=this.startHour>12?"PM":"AM","PM"===this.startAmPm?setTimeout(function(){this.timeElements.startpm.click()}.bind(this),500):setTimeout(function(){this.timeElements.startam.click()}.bind(this),500))}else this.militaryTime||("PM"===this.startAmPm&&(this.startHour=this.toMilitary(this.timeElements.startHourValueEl.value)),this.singleDate||"PM"!==this.endAmPm||(this.endHour=this.toMilitary(this.timeElements.endHourValueEl.value)),12===parseInt(this.timeElements.startHourValueEl.value)&&"AM"===this.startAmPm&&(this.startHour=0),this.singleDate||12!==parseInt(this.timeElements.endHourValueEl.value)||"AM"!==this.endAmPm||(this.endHour=0));let i="";this.singleDate||(i=this.dates[1]);let s=this.dates[0];this.dates=[],s&&(this.dates[0]=moment(s).hour(this.startHour).minute(this.startMinute).format(this.format),this.startDateElement.innerHTML=this.dates[0]),i&&!this.singleDate&&(this.dates[1]=moment(i).hour(this.endHour).minute(this.endMinute).format(this.format),this.endDateElement.innerHTML=this.dates[1]),this.onChange(),this.timeValid()||(null==e&&(e=document.querySelector(".startTimeElement")),this.flashWarning(e,2,function(){if(e.closest("[class$='TimeElement']").classList.contains("startTimeElement")){this.startHour=parseInt(this.timeElements.endHourValueEl.value),this.startMinute=parseInt(this.timeElements.endMinuteValueEl.value),this.militaryTime||(this.startAmPm=this.endAmPm);let t=this.endMinute,e=this.militaryTime?this.endHour:this.toAmPm(this.endHour);this.timeElements.startMinuteValueEl.value=t<10?t+"0":t,this.timeElements.startHourValueEl.value=e,this.militaryTime||("PM"===this.startAmPm?(this.timeElements.startpm.setAttribute("SELECTED","true"),this.timeElements.startam.removeAttribute("SELECTED")):(this.timeElements.startam.setAttribute("SELECTED","true"),this.timeElements.startpm.removeAttribute("SELECTED")))}else{this.endHour=parseInt(this.timeElements.startHourValueEl.value),this.endMinute=parseInt(this.timeElements.startMinuteValueEl.value),this.militaryTime||(this.endAmPm=this.startAmPm);let t=this.startMinute,e=this.militaryTime?this.startHour:this.toAmPm(this.startHour);this.timeElements.endMinuteValueEl.value=t<10?t+"0":t,this.timeElements.endHourValueEl.value=e,this.militaryTime||("PM"===this.endAmPm?(this.timeElements.endpm.setAttribute("SELECTED","true"),this.timeElements.endam.removeAttribute("SELECTED")):(this.timeElements.endam.setAttribute("SELECTED","true"),this.timeElements.endpm.removeAttribute("SELECTED")))}this.setTime()}.bind(this)))}}value(t,e){if(e&&"string"==typeof e||(e=this.format),"object"==typeof t){if(this.dates=[],t.length&&t[0]?("string"==typeof t[0]&&(t[0]=this.convertStringDate(t[0])),this.dates[0]=moment(t[0]).format(e)):this.defaults&&this.defaults.length?this.dates[0]=moment(this.defaults[0]).format(e):(this.singleDate||console.warn("Datepicker.js - WARNING: Use Datepicker.startDate(value) or Datepicker.endDate(value) to set single values. Your date will be set as the start date by default. "),this.dates[0]=moment(t).format(e)),2===t.length&&t[1]?("string"==typeof t[1]&&(t[1]=this.convertStringDate(t[1])),this.dates[1]=moment(t[1]).format(e)):this.defaults&&2===this.defaults.length?this.dates[1]=moment(this.defaults[1]).format(e):this.dates[1]=moment(this.dates[0]).format(e),2===this.dates.length&&moment(this.dates[0])>moment(this.dates[1])){let t=[];console.warn("Datepicker.js - WARNING: Tried to set a startDate greater than endDate, your dates were swapped to be chronologically correct."),t[0]=this.dates[1],t[1]=this.dates[0],this.dates=t}}else{if(!t||void 0===typeof t){if(this.dates[0]?this.dates[0]=moment(this.dates[0]).format(e):this.defaults&&this.defaults.length&&(this.dates[0]=moment(this.defaults[0]).format(e)),this.dates[1]?this.dates[1]=moment(this.dates[1]).format(e):this.defaults&&2===this.defaults.length&&(this.dates[1]=moment(this.defaults[1]).format(e)),this.singleDate)return new Date(this.dates[0])||new Date(this.defaults[0]);{let t=[];return t[0]=new Date(this.dates[0])||new Date(this.defaults[0]),t[1]=new Date(this.dates[1])||new Date(this.defaults[1]),e?[moment(t[0]).format(e),moment(t[1]).format(e)]:t}}if(("string"==typeof t||"number"==typeof t)&&(this.singleDate||console.warn("Datepicker.js - WARNING: Use Datepicker.startDate(value) or Datepicker.endDate(value) to set single values. Your date will be set as the start date by default. "),this.dates[0]=moment(this.dates[1]).format(e),2===this.dates.length&&moment(this.dates[0])>moment(this.dates[1]))){let t=[];console.warn("Datepicker.js - WARNING: Tried to set a startDate greater than endDate, your dates were swapped to be chronologically correct."),t[0]=this.dates[1],t[1]=this.dates[0],this.dates=t}}this.snapTo(this.dates[0]),this.onChange(),this.highlightDates(),this.setTime(),this.calendarElement.hideCalendar(),t[1]&&new Date(t[1])||this.singleDate||t[0]&&new Date(t[0])?t[1]&&new Date(t[1])||this.singleDate?t[0]&&new Date(t[0])||this.singleDate||console.warn("Datepicker.js - WARNING: No start date value provided, or tried to set [start, end] date with invalid or null start date value, start date will be set to default if provided."):console.warn("Datepicker.js - WARNING: No end date value provided, or tried to set [start, end] date with invalid or null end date value, end date will be set to default if provided."):console.warn("Datepicker.js - ERROR: Tried to set dates with invalid format or null values, start/end dates will be set to defaults if provided.")}startDate(t){if(null==t||!t)return new Date(this.dates[0]);this.value([t,this.dates[1]||this.defaults[1]||null])}endDate(t){if(null==t||!t)return new Date(this.dates[1]);this.value([this.dates[0]||this.defaults[0]||null,t])}nextMonth(t,e){"number"!=typeof e&&(e=1);let i=this.onChange;this.onChange=function(){},this.containerElement.innerHTML="",this.moment.add(e,"months"),this.drawCalendar(),this.drawInputElement(),this.presetMenu&&(this.drawPresetMenu(),this.closePresetMenu()),this.highlightDates(),this.timePicker&&this.setTime(),this.openCalendar(),this.onChange=i,this.calendarPlacement()}lastMonth(t,e){"number"!=typeof e&&(e=-1);let i=this.onChange;this.onChange=function(){},this.containerElement.innerHTML="",this.moment.add(e,"months"),this.drawCalendar(),this.drawInputElement(),this.presetMenu&&(this.drawPresetMenu(),this.closePresetMenu()),this.highlightDates(),this.timePicker&&this.setTime(),this.openCalendar(),this.onChange=i,this.calendarPlacement()}snapTo(t,e){t||(t=this.moment);let i=!!this.max&&moment(this.max).unix(),s=!!this.min&&moment(this.min).unix(),n=moment(t).unix();i&&i<n&&(t=moment(this.max)),t=s&&s>n?moment(this.min):moment(t),this.moment=t;let a=this.onChange;this.onChange=function(){},this.isVisible(this.calendarElement)||e?(this.containerElement.innerHTML="",this.drawCalendar(),this.drawInputElement(),this.presetMenu&&(this.drawPresetMenu(),this.closePresetMenu()),this.timePicker&&this.setTime(!0),this.highlightDates(),this.openCalendar()):(this.containerElement.innerHTML="",this.drawCalendar(),this.drawInputElement(),this.presetMenu&&(this.drawPresetMenu(),this.closePresetMenu()),this.timePicker&&this.setTime(!0),this.highlightDates(),this.closeCalendar()),this.onChange=a,this.calendarPlacement()}toAmPm(t){return 12===(t=parseInt(t))?12:t%12}toMilitary(t){return(t=12===(t=parseInt(t))?t=0:t)<12?t+12:t}convertStringDate(t){t=t.split(" ");let e="",i="";for(var s=0;s<t.length;s++)"PM"===t[s].toUpperCase()?(i="PM",t.splice(s,1)):"AM"===t[s].toUpperCase()?(i="AM",t.splice(s,1)):e=e+" "+t[s];let n=moment(e).hour(),a=moment(e);return"PM"===i&&n<12&&a.hour(n+12),a}dayClick(t){if(this.timePicker&&(this.startHour=parseInt(this.timeElements.startHourValueEl.value),this.startMinute=parseInt(this.timeElements.startMinuteValueEl.value),this.singleDate||(this.endHour=parseInt(this.timeElements.endHourValueEl.value),this.endMinute=parseInt(this.timeElements.endMinuteValueEl.value)),this.militaryTime||("PM"===this.startAmPm&&(this.startHour=this.toMilitary(this.timeElements.startHourValueEl.value)),"PM"!==this.endAmPm||this.singleDate||(this.endHour=this.toMilitary(this.timeElements.endHourValueEl.value)),12===parseInt(this.timeElements.startHourValueEl.value)&&"AM"===this.startAmPm&&(this.startHour=0),"AM"!==this.endAmPm||this.singleDate||12!==parseInt(this.timeElements.endHourValueEl.value)||(this.endHour=0))),this.singleDate)this.dates=[],this.dates[0]=moment(t.value).set({h:this.startHour,m:this.startMinute}).format(this.format),this.startDateElement.innerHTML=this.dates[0];else if(this.dates.length>1||this.dates.length<1)this.dates=[],this.dates[0]=moment(t.value).set({h:this.startHour,m:this.startMinute}).format(this.format),this.timePicker?(this.startDateElement.innerHTML=this.dates[0],this.endDateElement.innerHTML="--/--/----  --:--"):(this.startDateElement.innerHTML=this.dates[0],this.endDateElement.innerHTML="--/--/---- ");else{if(moment(this.dates[0]).set({h:this.startHour,m:this.startMinute}).unix()>moment(t.value).hour(this.endHour).minute(this.endMinute).unix()){let e=this.dates[0];this.dates=[],this.dates[1]=moment(e).set({h:this.endHour,m:this.endMinute}).format(this.format),this.dates[0]=moment(t.value).set({h:this.startHour,m:this.startMinute}).format(this.format),this.startDateElement.innerHTML=this.dates[0],this.endDateElement.innerHTML=this.dates[1]}else this.dates[1]=moment(t.value).set({h:this.endHour,m:this.endMinute}).format(this.format),this.endDateElement.innerHTML=this.dates[1]}this.onChange(),!this.singleDate&&2===this.dates.length&&this.options.autoClose?setTimeout(function(){this.closeCalendar()}.bind(this),400):this.singleDate&&1===this.dates.length&&this.options.autoClose&&setTimeout(function(){this.closeCalendar()}.bind(this),400),this.highlightDates(),this.drawInputElement(),(2===this.dates.length||this.singleDate)&&this.options.autoClose&&setTimeout(function(){this.closeCalendar()}.bind(this),700)}isOutsideCalendar(t){return!this.calendarElement.contains(t.target)&&this.isVisible(this.calendarElement)&&!this.inputElement.contains(t.target)&&!t.target.classList.contains("leftArrow")&&!t.target.classList.contains("rightArrow")&&!t.target.classList.contains("decrease-year-button")&&!t.target.classList.contains("increase-year-button")}outsideCalendarClick(t){this.isOutsideCalendar(t)&&(this.closeCalendar(),this.drawInputElement())}calendarPlacement(){let t,e,i=this.containerElement.querySelector(".grid-container"),s={windowWidth:window.innerWidth,windowHeight:window.innerHeight,calendarWidth:i.getBoundingClientRect().width,calendarHeight:i.getBoundingClientRect().height,containerHeight:this.containerElement.getBoundingClientRect().height,containerWidth:this.containerElement.getBoundingClientRect().width,datepickerTop:this.containerElement.querySelector(".date").getBoundingClientRect().top,datepickerBottom:this.containerElement.querySelector(".date").getBoundingClientRect().bottom,datepickerRight:this.containerElement.querySelector(".date").getBoundingClientRect().right,datepickerLeft:this.containerElement.querySelector(".date").getBoundingClientRect().left,datepickerWidth:this.containerElement.querySelector(".date").getBoundingClientRect().width,datepickerHeight:this.containerElement.querySelector(".date").getBoundingClientRect().height,screenCenterX:window.outerWidth/2,screenCenterY:window.outerHeight/2};s.windowWidth>750?(s.windowWidth-s.datepickerRight<s.calendarWidth+10?(s.datepickerLeft<s.calendarWidth+10?s.datepickerRight=s.datepickerRight-s.datepickerWidth-.5*s.calendarWidth:s.datepickerRight=s.datepickerLeft-s.calendarWidth,e=s.datepickerRight):e=s.datepickerLeft+.5*s.datepickerWidth,s.calendarHeight>s.windowHeight-(s.datepickerTop+s.datepickerHeight)?(s.datepickerTop<s.calendarHeight+s.datepickerHeight?s.datepickerTop=20:s.datepickerTop=s.datepickerTop-s.calendarHeight,s.datepickerHeight=.5*s.datepickerHeight,t=s.datepickerTop):t=s.datepickerHeight+s.datepickerTop+5):window.outerWidth>450?(t=2,e=s.screenCenterX-s.calendarWidth/2>0?s.screenCenterX-s.calendarWidth/2:s.datepickerLeft):(t=2,e=-2),i.setAttribute("style","position: fixed; left:"+e+"px; top: "+t+"px;")}isVisible(t){return!(!t||!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)||"grid"!==t.style.display&&"block"!==t.style.display&&""!==t.style.visibility)}openCalendar(){this.calendarElement.showCalendar(),this.calendarPlacement(),this.highlightDates(),this.calendarPlacement()}closeCalendar(){if(this.onClose(),!this.dates.length&&this.defaults&&this.defaults.length?(this.defaults[0]?(this.dates[0]=moment(this.defaults[0]).format(this.format),this.startDateElement.innerHTML=this.dates[0]):(this.dates[0]=moment().startOf("week").format(this.format),this.startDateElement.innerHTML=this.dates[0]),this.defaults[1]?this.singleDate||(this.dates[1]=moment(this.defaults[1]).format(this.format),this.endDateElement.innerHTML=this.dates[1]):this.singleDate||(this.dates[1]=moment().endOf("week").format(this.format),this.endDateElement.innerHTML=this.dates[1])):this.defaults&&!this.dates.length&&(this.singleDate||(this.dates[1]=moment().endOf("week").format(this.format),this.endDateElement.innerHTML=this.dates[1]),this.dates[0]=moment().startOf("week").format(this.format),this.startDateElement.innerHTML=this.dates[0]),1===this.dates.length&&this.defaults&&2===this.defaults.length&&this.defaults[1]?this.singleDate||(this.dates[1]=moment(this.defaults[1]).format(this.format),this.endDateElement.innerHTML=this.dates[1],this.startDateElement.innerHTML=this.dates[0]):1===this.dates.length&&this.defaults&&!this.defaults[1]&&(this.singleDate||(this.dates[1]=moment(this.dates[0]).format(this.format),this.endDateElement.innerHTML=this.dates[1],this.startDateElement.innerHTML=this.dates[0])),2===this.dates.length&&moment(this.dates[0])>moment(this.dates[1])){let t=[];console.warn("Datepicker.js - WARNING: Tried to set a startDate greater than endDate, your dates were swapped to be chronologically correct."),t[0]=this.dates[1],t[1]=this.dates[0],this.dates=t}this.setTime(),this.calendarElement.hideCalendar(),this.drawInputElement()}openPresetMenu(){this.presetMenuContainer.showPresetMenu()}closePresetMenu(){this.presetMenuContainer.hidePresetMenu()}resetCalendar(){this.reset(!0)}reset(t){void 0!==t&&t||(t=!1),this.dates=[],this.containerElement.innerHTML="",this.drawCalendar(),this.drawInputElement(),this.presetMenu&&(this.drawPresetMenu(),this.closePresetMenu()),this.onChange(),this.snapTo(new Date),t?setTimeout(this.openCalendar,10):this.closeCalendar()}}