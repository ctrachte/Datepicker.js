class Datepicker{constructor(t){if(!t)throw"Error: Datepicker.js options object must be defined, with at least options.containerElement.";if(void 0===t.containerElement||!t.containerElement)throw"Error: you must specify a container element in the Datepicker.js options object!";Element.prototype.hideDatepickerEl=function(){this.style.visibility="hidden"},Element.prototype.showDatepickerEl=function(){this.style.visibility=""},Element.prototype.hideContainer=function(){this.style.display="none"},Element.prototype.showContainer=function(){this.style.display="block"},Element.prototype.hideCalendar=function(){this.style.display="none"},Element.prototype.showCalendar=function(){this.style.display="grid"},Element.prototype.hidePresetMenu=function(){this.style.display="none"},Element.prototype.showPresetMenu=function(){this.style.display="flex"},this.options=t,this.max="object"==typeof this.options.max&&this.options.max,this.min="object"==typeof this.options.min&&this.options.min,this.containerElement=t.containerElement,this.containerElement.classList.add("DatepickerContainer"),this.timePicker=void 0===this.options.timePicker||this.options.timePicker,this.presetMenu=void 0===this.options.presetMenu||this.options.presetMenu,this.menuOptions=void 0!==this.options.menuOptions?this.options.menuOptions:[],this.autoClose=void 0!==this.options.autoClose&&this.options.autoClose,this.singleDate=void 0!==this.options.singleDate&&this.options.singleDate,this.clearDates=void 0!==this.options.clearDates&&this.options.clearDates,this.leadingTrailingDates=void 0===this.options.leadingTrailingDates||this.options.leadingTrailingDates,this.militaryTime=void 0!==this.options.militaryTime&&this.options.militaryTime,this.format=this.options.format||(this.timePicker?this.militaryTime?"MM/DD/YYYY HH:mm:ss":"MM/DD/YYYY hh:mm A":"MM/DD/YYYY"),this.startDateLabel=this.singleDate?void 0!==this.options.startDateLabel?this.options.startDateLabel:"Date: ":void 0!==this.options.startDateLabel?this.options.startDateLabel:"Start Date: ",this.endDateLabel=void 0!==this.options.endDateLabel?this.options.endDateLabel:"End Date: ",this.max&&moment(this.max).unix()<moment().unix()?this.moment=moment(moment(this.max),this.format,!0):this.moment=moment(moment(),this.format,!0),this.min&&moment(this.min).unix()>moment().unix()?this.moment=moment(moment(this.min),this.format,!0):this.moment=moment(moment(),this.format,!0),this.onChange=void 0!==this.options.onChange?this.options.onChange:function(){},this.onSubmit=void 0!==this.options.onSubmit?this.options.onSubmit:function(){},this.onClose=void 0!==this.options.onClose?this.options.onClose:function(){},this.drawCalendar=this.drawCalendar.bind(this),this.dayClick=this.dayClick.bind(this),this.nextMonth=this.nextMonth.bind(this),this.lastMonth=this.lastMonth.bind(this),this.highlightDates=this.highlightDates.bind(this),this.flashWarning=this.flashWarning.bind(this),this.toggleAMPM=this.toggleAMPM.bind(this),this.clickAMPM=this.clickAMPM.bind(this),this.inputElement=document.createElement("div"),this.drawInputElement=this.drawInputElement.bind(this),this.openCalendar=this.openCalendar.bind(this),this.closeCalendar=this.closeCalendar.bind(this),this.openPresetMenu=this.openPresetMenu.bind(this),this.closePresetMenu=this.closePresetMenu.bind(this),this.resetCalendar=this.resetCalendar.bind(this),this.reset=this.reset.bind(this),this.value=this.value.bind(this),this.startDate=this.startDate.bind(this),this.endDate=this.endDate.bind(this),this.outsideCalendarClick=this.outsideCalendarClick.bind(this),this.isOutsideCalendar=this.isOutsideCalendar.bind(this),this.leadingTrailing=this.leadingTrailing.bind(this),this.defaultDatesValid=this.defaultDatesValid.bind(this),this.drawPresetMenu=this.drawPresetMenu.bind(this),this.hourChange=this.hourChange.bind(this),this.upDownClick=this.upDownClick.bind(this),this.createHourUpDown=this.createHourUpDown.bind(this),this.minuteBuild=this.minuteBuild.bind(this),this.drawStartTimePicker=this.drawStartTimePicker.bind(this),this.drawEndTimePicker=this.drawEndTimePicker.bind(this),this.snapTo=this.snapTo.bind(this),this.toAmPm=this.toAmPm.bind(this),this.timeValid=this.timeValid.bind(this),this.dates=[],this.defaults=void 0===this.options.defaults||this.options.defaults,this.defaultsValid=this.defaultDatesValid(),this.defaultsValid&&this.defaults&&(this.defaults=[],this.defaults[0]&&(this.defaults[0]="object"==typeof this.options.defaults&&!!this.options.defaults.length&&moment(this.options.defaults[0]).format(this.format)),this.defaults[0]&&(this.dates[0]=this.defaults[0]),!this.singleDate&&(this.defaults[1]="object"==typeof this.options.defaults&&2===this.options.defaults.length&&moment(this.options.defaults[1]).format(this.format),this.defaults[1]&&(this.dates[1]=this.defaults[1]))),this.timeElements={},this.startHour="12",this.startMinute="00",this.startAmPm="PM",this.endHour="12",this.endMinute="00",this.endAmPm="PM",this.drawCalendar(),this.drawInputElement(),this.presetMenu&&(this.drawPresetMenu(),this.closePresetMenu()),this.calendarPlacement(),this.calendarElement.hideCalendar()}flashWarning(t,e,i){let s=t.closest("[class$='TimeElement']");s&&(s.classList.add("flashWarning"),setTimeout(function(){s.classList.remove("flashWarning"),i()},1e3*e))}toggleAMPM(t){let e="startHour"===t?this.startAmPm:this.endAmPm,i="startHour"===t?this.timeElements.startam:this.timeElements.endam,s="startHour"===t?this.timeElements.startpm:this.timeElements.endpm;"PM"===e?i.dispatchEvent(new Event("click")):s.dispatchEvent(new Event("click"))}clickAMPM(t){let e=t.target;Array.from(e.parentElement.children).forEach(function(t){t==e?t.setAttribute("SELECTED","true"):t.removeAttribute("SELECTED")}),e.parentElement.parentElement.classList.contains("startTimeElement")?this.startAmPm=e.classList.contains("am")?"AM":"PM":this.endAmPm=e.classList.contains("am")?"AM":"PM",this.setTime(!1,e)}drawInputElement(){this.inputElement.innerHTML="",this.inputElement.setAttribute("class","launch");let t=document.createElement("div"),e=document.createElement("div"),i=document.createElement("div"),s=document.createElement("div"),a=document.createElement("div"),n=document.createElement("div");e.innerHTML=this.startDateLabel,t.setAttribute("class","startBlock"),e.setAttribute("class","heading"),t.appendChild(e),t.appendChild(a),a.innerHTML=moment(this.dates[0]).format(this.format),a.setAttribute("class","date"),this.inputElement.appendChild(t),i.setAttribute("class","heading"),this.singleDate||(i.innerHTML=this.endDateLabel,s.appendChild(i),n.setAttribute("class","date"),s.appendChild(n),s.setAttribute("class","endBlock"),this.inputElement.appendChild(s)),this.dates[0]?a.innerHTML=moment(this.dates[0]).format(this.format):this.timePicker?a.innerHTML=" --/--/----  --:-- ":a.innerHTML=" --/--/---- ",this.singleDate||(this.dates[1]&&(this.dates[1],1)?n.innerHTML=moment(this.dates[1]).format(this.format):this.timePicker?n.innerHTML=" --/--/----  --:-- ":n.innerHTML=" --/--/---- "),this.inputElement.addEventListener("click",(function(t){this.openCalendar()}).bind(this)),this.containerElement.appendChild(this.inputElement)}drawCalendar(){this.firstDayOfMonth=this.moment.startOf("month").format("dddd"),this.lastDayOfMonth=this.moment.endOf("month").format("dddd");let t=this.nextMonth,e=this.lastMonth,i=this.dayClick,s=document.createElement("div"),a=document.createElement("div");a.setAttribute("style","grid-column-start: 2; grid-column-end: 5;");let n=document.createElement("div");n.setAttribute("style","grid-column-start: 5; grid-column-end: 7;");let r=document.createElement("select");r.setAttribute("name","months"),r.setAttribute("class","datepicker-month-select"),r.setAttribute("aria-label","datepicker-month-select"),this.moment._locale._months.forEach((function(t,e){let i=document.createElement("option");i.innerHTML=t,i.value=e+1,t===this.moment._locale._months[this.moment.month()]&&(i.selected=!0),r.appendChild(i)}).bind(this)),r.addEventListener("change",(function(t){this.moment.month(r.value-1),this.snapTo()}).bind(this));let l=document.createElement("input");l.setAttribute("type","number"),l.setAttribute("name","year"),l.setAttribute("class","datepicker-year-input"),l.setAttribute("aria-label","datepicker-year-input"),l.value=this.moment.year(),l.addEventListener("change",(function(t){if(1900>parseInt(l.value)||parseInt(l.value)>2200){l.value=this.moment.year();return}this.moment.year(l.value),this.snapTo()}).bind(this));let h=document.createElement("span");h.innerHTML="&#43;",h.setAttribute("class","increase-year-button"),h.setAttribute("aria-label","Increase Year Button"),h.setAttribute("role","button"),h.addEventListener("click",(function(t){l.stepUp(),l.dispatchEvent(new Event("change"))}).bind(this));let d=document.createElement("span");if(d.innerHTML="&#x2212;",d.setAttribute("class","decrease-year-button"),d.setAttribute("aria-label","Decrease Year Button"),d.setAttribute("role","button"),d.addEventListener("click",(function(t){l.stepDown(),l.dispatchEvent(new Event("change"))}).bind(this)),this.menuIconContainer=document.createElement("div"),this.menuIconContainer.setAttribute("style","grid-column-start: 1; grid-column-end: 2; background-color: transparent !important;"),this.menuIconContainer.setAttribute("aria-label","Preset Menu Button"),this.menuIconContainer.setAttribute("role","menu"),this.presetMenu){let o=document.createElement("span");o.innerHTML="&#9776;",o.classList.add("calendarHamburger"),this.menuIconContainer.addEventListener("click",(function(t){this.menuIconContainer.classList.contains("open")?(this.closePresetMenu(),this.menuIconContainer.classList.remove("open")):(this.openPresetMenu(),this.menuIconContainer.classList.add("open"))}).bind(this)),this.menuIconContainer.appendChild(o)}let m=document.createElement("div");m.classList.add("leftArrow"),m.setAttribute("style","background-color: transparent !important;"),m.setAttribute("aria-label","Previous Month Button"),m.setAttribute("role","navigation"),m.innerHTML="&#5130;",m.addEventListener("click",e.bind(this));let u=document.createElement("div");u.classList.add("rightArrow"),u.setAttribute("style","background-color: transparent !important;"),u.setAttribute("aria-label","Next Month Button"),u.setAttribute("role","navigation"),u.innerHTML="&#5125;",u.addEventListener("click",t.bind(this)),a.appendChild(m),a.appendChild(r),a.appendChild(u),n.appendChild(d),n.appendChild(l),n.appendChild(h),a.classList.add("monthHeader"),n.classList.add("yearHeader"),s.classList.add("grid-container");let c=document.createElement("div");c.setAttribute("style","grid-column-start: 7; grid-column-end: 8; background-color: transparent !important;"),c.setAttribute("aria-label","Preset Menu Button"),c.setAttribute("role","button");let p=document.createElement("span");p.innerHTML="&#10006;",p.classList.add("close-calendar-button"),c.addEventListener("click",(function(t){this.closeCalendar()}).bind(this)),c.appendChild(p),s.appendChild(this.menuIconContainer),s.appendChild(a),s.appendChild(n),s.appendChild(c),this.moment._locale._weekdaysShort.forEach(function(t){let e=document.createElement("div");switch(e.classList.add(t),e.classList.add("dayHeader"),t){case"Sun":e.setAttribute("aria-label","Sunday");break;case"Mon":e.setAttribute("aria-label","Monday");break;case"Tue":e.setAttribute("aria-label","Tuesday");break;case"Wed":e.setAttribute("aria-label","Wednesday");break;case"Thu":e.setAttribute("aria-label","Thursday");break;case"Fri":e.setAttribute("aria-label","Friday");break;case"Sat":e.setAttribute("aria-label","Saturday")}e.innerHTML=" "+t+" ",s.appendChild(e)});let E=Array.from(Array(this.moment.daysInMonth()).keys()),f=this.leadingTrailing(),g=this.moment._locale._weekdays.indexOf(this.firstDayOfMonth)+1,M=this.moment._locale._weekdays.indexOf(this.lastDayOfMonth)+1;if(this.leadingTrailingDates)for(let b=g-1;b>0;b--){let C=document.createElement("div");C.classList.add("prev-month-day-"+parseInt(f.trailing[b]+1)),C.classList.add("leading-trailing-day"),C.innerHTML=parseInt(f.trailing[b])+1,C.setAttribute("aria-label",parseInt(f.trailing[b]+1)+""),0===b&&C.classList.add("grid-column-start:0;"),s.appendChild(C)}let D=!!this.max&&moment(this.max).unix(),v=!!this.min&&moment(this.min).unix();if(E.forEach((function(t){let e=document.createElement("div");e.classList.add("day-"+(parseInt(t)+1)),e.classList.add("day"),e.innerHTML=parseInt(t)+1;let a=moment(this.moment.format("MM")+"/"+parseInt(t+1)+"/"+this.moment.format("YYYY")).format(this.format);e.setAttribute("role","button"),e.setAttribute("aria-label",a),e.value=a;let n=moment(e.value).unix();D&&n>D?(e.classList.add("disabled"),e.setAttribute("disabled",!0)):v&&n<v?(e.classList.add("disabled"),e.setAttribute("disabled",!0)):e.addEventListener("click",i.bind(this,e)),s.appendChild(e)}).bind(this)),this.leadingTrailingDates)for(let $=1;$<8-M;$++){let y=document.createElement("div");y.classList.add("next-month-day-"+$),y.classList.add("leading-trailing-day"),y.innerHTML=$,y.setAttribute("aria-label","day-"+$+"-next-month"),0===$&&y.classList.add("grid-column-start:"+M+";"),s.appendChild(y)}let _;s.querySelector(".day-1").setAttribute("style","grid-column-start: "+g+";"),this.startDateElement=document.createElement("div"),this.startDateHeader=document.createElement("div"),this.startDateHeader.innerHTML="<b>"+this.startDateLabel+"</b>",this.startDateContainer=document.createElement("div"),this.startDateContainer.classList.add("startDateElement"),this.endDateElement=document.createElement("div"),this.endDateHeader=document.createElement("div"),this.endDateHeader.innerHTML="<b>"+this.endDateLabel+"</b>",this.endDateContainer=document.createElement("div"),this.endDateContainer.classList.add("endDateElement"),this.singleDate?(this.startDateContainer.setAttribute("style","grid-column-start: 1; grid-column-end: 8;"),this.timePicker?this.startDateElement.innerHTML="--/--/----  --:--":this.startDateElement.innerHTML="--/--/----"):(this.startDateContainer.setAttribute("style","grid-column-start: 1; grid-column-end: 4;"),this.timePicker?this.startDateElement.innerHTML="--/--/----  --:--":this.startDateElement.innerHTML="--/--/----"),this.startDateContainer.appendChild(this.startDateHeader),this.startDateContainer.appendChild(this.startDateElement),s.appendChild(this.startDateContainer),this.calendarElement=s,this.timePicker?(this.drawStartTimePicker(),this.singleDate||(this.timePicker?(this.endDateContainer.setAttribute("style","grid-column-start: 1; grid-column-end: 4;"),this.endDateElement.innerHTML="--/--/----  --:--"):(this.endDateContainer.setAttribute("style","grid-column-start: 5; grid-column-end: 8;"),this.endDateElement.innerHTML="--/--/----"),this.endDateContainer.appendChild(this.endDateHeader),this.endDateContainer.appendChild(this.endDateElement),this.calendarElement.appendChild(this.endDateContainer),this.drawEndTimePicker())):this.singleDate||(this.timePicker?(this.endDateContainer.setAttribute("style","grid-column-start: 1; grid-column-end: 4;"),this.endDateElement.innerHTML="--/--/----  --:--"):(this.endDateContainer.setAttribute("style","grid-column-start: 5; grid-column-end: 8;"),this.endDateElement.innerHTML="--/--/----"),this.endDateContainer.appendChild(this.endDateHeader),this.endDateContainer.appendChild(this.endDateElement),this.calendarElement.appendChild(this.endDateContainer));let H=document.createElement("button");H.classList.add("cancelButton"),H.type="cancel",H.style.gridColumnStart=1,H.style.gridColumnEnd=3,H.addEventListener("click",(function(t){this.clearDates?this.resetCalendar():this.closeCalendar()}).bind(this)),this.clearDates?!0===this.defaults||this.defaults.length?H.innerHTML="&#x21BA;":H.innerHTML="&#10006;":(H.innerHTML="&#10006;",H.style.backgroundColor="grey"),s.appendChild(H);let L=document.createElement("button");L.classList.add("submitButton"),L.innerHTML="&#10004;",L.type="submit",L.style.gridColumnStart=3,L.style.gridColumnEnd=8,L.addEventListener("click",(function(t){this.onSubmit(),this.closeCalendar()}).bind(this)),s.appendChild(L),this.containerElement.appendChild(s),document.addEventListener("click",(function(t){this.outsideCalendarClick(t)}).bind(this))}drawPresetMenu(){this.presetMenuContainer=document.createElement("div"),this.presetMenuContainer.setAttribute("class","presetMenuContainer");let t=document.createElement("ul"),e=new Date,i=[];if(i=this.singleDate?[{title:"Yesterday",values:[moment(e).add(-1,"day").hour(0).minute(0)]},{title:"Today",values:[moment(e).hour(0).minute(0)]},{title:"Tomorrow",values:[moment(e).add(1,"day").hour(0).minute(0)]}]:[{title:"This Week",values:[moment(e).startOf("week"),moment(e).endOf("week")]},{title:"Next Week",values:[moment(e).add(1,"week").startOf("week"),moment(e).add(1,"week").endOf("week")]},{title:"Last Week",values:[moment(e).add(-1,"week").startOf("week"),moment(e).add(-1,"week").endOf("week")]},{title:"This Month",values:[moment(e).startOf("month"),moment(e).endOf("month")]},{title:"Next Month",values:[moment(e).add(1,"month").startOf("month"),moment(e).add(1,"month").endOf("month")]},{title:"Last Month",values:[moment(e).add(-1,"month").startOf("month"),moment(e).add(-1,"month").endOf("month")]},{title:"This Year",values:[moment(e).startOf("year"),moment(e).endOf("year")]},{title:"Next Year",values:[moment(e).add(1,"year").startOf("year"),moment(e).add(1,"year").endOf("year")]},{title:"Last Year",values:[moment(e).add(-1,"year").startOf("year"),moment(e).add(-1,"year").endOf("year")]},],void 0!==this.menuOptions&&this.menuOptions.length>0){let s=!!this.max&&moment(this.max).unix(),a=!!this.min&&moment(this.min).unix();for(let n=0;n<this.menuOptions.length;n++){let r=moment(this.menuOptions[n].values[0]).unix(),l=moment(this.menuOptions[n].values[1]).unix();s&&s<l||a&&a>r?console.warn('Datepicker.js: Preset menu option: "'+this.menuOptions[n].title+'" lies partially or entirely outside max/min allowed and was disabled.'):i.push(this.menuOptions[n])}}for(let h of i){let d=!!this.max&&moment(this.max).unix(),o=!!this.min&&moment(this.min).unix(),m=moment(h.values[0]).unix(),u=moment(h.values[1]).unix();if(d&&d<u||o&&o>m)console.warn('Datepicker.js: Preset menu option: "'+h.title+'" lies partially or entirely outside max/min allowed and was disabled.');else{let c=document.createElement("li");c.setAttribute("class",h.title+"-menu-option"),c.innerHTML=h.title,c.addEventListener("click",(function(t){this.dates.length=0,this.highlightDates(),this.dates[0]=h.values[0],this.singleDate||(this.dates[1]=h.values[1]);let e=this.onChange;this.onChange=function(){},this.highlightDates(),this.snapTo(this.dates[0],!0),this.timePicker?this.setTime(!0):(this.startDateElement.innerHTML=moment(this.dates[0]).format(this.format),this.singleDate||(this.endDateElement.innerHTML=moment(this.dates[1]).format(this.format))),this.drawInputElement(),this.onChange=e,this.onChange(),this.menuIconContainer.classList.remove("open")}).bind(this)),t.appendChild(c)}}let p=document.createElement("div");p.setAttribute("style","background-color: transparent !important;"),p.setAttribute("aria-label","Preset Menu Close Button"),p.setAttribute("role","button");let E=document.createElement("span");E.innerHTML="&#10006;",E.classList.add("close-preset-menu"),p.addEventListener("click",(function(t){this.closePresetMenu(),this.menuIconContainer.classList.remove("open")}).bind(this)),p.appendChild(E),this.presetMenuContainer.appendChild(p),this.presetMenuContainer.appendChild(t),this.calendarElement.appendChild(this.presetMenuContainer)}hourChange(t){let e=t.target==document.querySelector("input#endHour")?this.timeElements.endHourValueEl.value:this.timeElements.startHourValueEl.value;(e=this.militaryTime?parseInt(e):this.toMilitary(parseInt(e)))>23?e=0:e<1&&(e=23),e<10&&this.militaryTime&&(e="0"+e),e=this.militaryTime?e:this.toAmPm(e),t.target==document.querySelector("input#endHour")?this.timeElements.endHourValueEl.value=e:this.timeElements.startHourValueEl.value=e,!this.militaryTime&&t.fromClick&&("up"==t.fromClick&&12==e||"down"==t.fromClick&&11==e)?this.toggleAMPM(t.target.id):this.setTime(!1,t.target)}upDownClick(t,e,i){let s=t.value;s%i==0||0===parseInt(s)||(i=1),t.value="up"==e?parseInt(s)+i:parseInt(s)-i;let a=new Event("change");a.fromClick=e,t.dispatchEvent(a)}createHourUpDown(t){let e=document.createElement("span");return e.classList.add("TimeUpDown"),e.innerHTML="<div>&#9650;</div><div>&#9660;</div>",e.querySelectorAll("div")[0].onclick=(function(){this.upDownClick(t,"up",1)}).bind(this),e.querySelectorAll("div")[1].onclick=(function(){this.upDownClick(t,"down",1)}).bind(this),e}minuteBuild(t,e){let i=document.createElement("div");i.innerHTML=":",i.classList.add("timeColon"),i.style.gridColumn="3 / span 1",t.appendChild(i),10>parseInt(e)&&(e="0"+parseInt(e));let s=document.createElement("div");s.classList.add("minute"),s.innerHTML="<input type='number' min='1' max='59' value='"+e+"' />",s.style.gridColumn="4 / span 2";let a=s.querySelector("input");t.classList.contains("startTimeElement")?this.timeElements.startMinuteValueEl=a:this.timeElements.endMinuteValueEl=a;let n=(function(e){let i=parseInt(a.value),s=null;switch(i>59?(i=0,s="up"):i<0&&(i=45,s="down"),i<10&&(i="0"+i),a.value=i,s){case"up":t.querySelectorAll(".hour > .TimeUpDown > div")[0].dispatchEvent(new Event("click"));break;case"down":t.querySelectorAll(".hour > .TimeUpDown > div")[1].dispatchEvent(new Event("click"));break;default:this.setTime(!1,a)}}).bind(this);a.addEventListener("change",n),a.addEventListener("click",function(){setTimeout(function(){a.select()},100)});let r=document.createElement("span");return r.classList.add("TimeUpDown"),r.innerHTML="<div>&#9650;</div><div>&#9660;</div>",r.querySelectorAll("div")[0].onclick=(function(){this.upDownClick(a,"up",15)}).bind(this),r.querySelectorAll("div")[1].onclick=(function(){this.upDownClick(a,"down",15)}).bind(this),s.appendChild(r),s}ampmBuild(t){if(!this.militaryTime){let e=document.createElement("div");e.classList.add("ampm"),e.innerHTML="",e.style.gridColumn="6 / span 1";let i;t.classList.contains("startTimeElement")?(this.timeElements.startampm=e,i=this.startAmPm):(this.timeElements.endampm=e,i=this.endAmPm);let s=document.createElement("div");s.classList.add("am"),s.innerHTML="AM",s.addEventListener("click",this.clickAMPM),e.appendChild(s);let a=document.createElement("div");a.classList.add("pm"),a.innerHTML="PM",a.addEventListener("click",this.clickAMPM),e.appendChild(a),"PM"===i?(a.setAttribute("SELECTED","true"),s.removeAttribute("SELECTED")):(s.setAttribute("SELECTED","true"),a.removeAttribute("SELECTED")),t.classList.contains("startTimeElement")?(this.timeElements.startam=s,this.timeElements.startpm=a):(this.timeElements.endam=s,this.timeElements.endpm=a),t.appendChild(e)}}drawStartTimePicker(){let t=document.createElement("div");t.classList.add("startTimeElement"),this.singleDate?(t.style.gridColumnStart=1,t.style.gridColumnEnd=8):(t.style.gridColumnStart=4,t.style.gridColumnEnd=8),this.militaryTime||(this.startHour=this.toAmPm(parseInt(this.startHour)));let e=document.createElement("div");e.classList.add("hour"),e.innerHTML="<input id='startHour' type='number' min='1' max='23' value='"+this.startHour+"' />",e.style.gridColumn="1 / span 2";let i=e.querySelector("#startHour");this.timeElements.startHourValueEl=i,i.addEventListener("change",this.hourChange),i.addEventListener("click",function(){setTimeout(function(){i.select()},100)});let s=this.createHourUpDown(i);e.appendChild(s),t.appendChild(e);let a=this.minuteBuild(t,this.startMinute);t.appendChild(a),this.ampmBuild(t),this.calendarElement.appendChild(t)}drawEndTimePicker(){if(!this.singleDate){let t=document.createElement("div");t.classList.add("endTimeElement"),t.style.gridColumnStart=4,t.style.gridColumnEnd=8,this.militaryTime||(this.endHour=this.toAmPm(parseInt(this.endHour)));let e=document.createElement("div");e.classList.add("hour"),e.innerHTML="<input id='endHour' type='number' min='1' max='23' value='"+this.endHour+"' />",e.style.gridColumn="1 / span 2";let i=e.querySelector("#endHour");this.timeElements.endHourValueEl=i,i.addEventListener("change",this.hourChange),i.addEventListener("click",function(){setTimeout(function(){i.select()},100)});let s=this.createHourUpDown(i);e.appendChild(s),t.appendChild(e);let a=this.minuteBuild(t,this.endMinute);t.appendChild(a),this.ampmBuild(t),this.calendarElement.appendChild(t)}}leadingTrailing(){let t=1===parseInt(this.moment.month())||0===parseInt(this.moment.month())?12:parseInt(this.moment.month()),e=1===parseInt(this.moment.month())||0===parseInt(this.moment.month())?parseInt(this.moment.year())-1:parseInt(this.moment.year()),i=parseInt(moment(e+"-"+t,"YYYY-MM").daysInMonth()),s=[],a=[];for(let n=1;n<8;n++)a.push(i),i--,s.push(n);return Object({leading:s,trailing:a})}highlightDates(){let t=this.containerElement.querySelectorAll(".day");this.dates.length>0&&2===this.dates.length?t.forEach((function(t){let e=moment(t.value).format("MM/DD/YYYY"),i=moment(this.dates[0]).format("MM/DD/YYYY"),s=moment(this.dates[1]).format("MM/DD/YYYY"),a=moment(t.value).format("X"),n=moment(this.dates[0]).format("X"),r=moment(this.dates[1]).format("X");i===e&&(t.classList.add("active"),t.setAttribute("aria-pressed","true")),s===e&&(t.classList.add("active"),t.setAttribute("aria-pressed","true")),a>n&&a<r&&t.classList.add("highlighted")}).bind(this)):t.forEach((function(t){let e=moment(t.value).format("MM/DD/YYYY");moment(this.dates[0]).format("MM/DD/YYYY")===e?(t.classList.add("active"),t.setAttribute("aria-pressed","true")):(t.classList.contains("active")&&(t.classList.remove("active"),t.setAttribute("aria-pressed","false")),t.classList.contains("highlighted")&&t.classList.remove("highlighted"))}).bind(this))}timeValid(){if(2!==this.dates.length||this.singleDate||!this.timePicker)return!0;{this.startHour=parseInt(this.timeElements.startHourValueEl.value),this.startMinute=parseInt(this.timeElements.startMinuteValueEl.value),this.endHour=parseInt(this.timeElements.endHourValueEl.value),this.endMinute=parseInt(this.timeElements.endMinuteValueEl.value),this.militaryTime||("PM"===this.startAmPm&&(this.startHour=this.toMilitary(this.timeElements.startHourValueEl.value)),"PM"===this.endAmPm&&(this.endHour=this.toMilitary(this.timeElements.endHourValueEl.value)),12===parseInt(this.timeElements.startHourValueEl.value)&&"AM"===this.startAmPm&&(this.startHour=0),12!==parseInt(this.timeElements.endHourValueEl.value)||"AM"!==this.endAmPm||(this.endHour=0));let t=moment(this.dates[0]).day()===moment(this.dates[1]).day(),e=moment(this.dates[0]).month()===moment(this.dates[1]).month(),i=moment(this.dates[0]).year()===moment(this.dates[1]).year();if(!t||!e||!i)return!0;{let s=moment(this.dates[0]).hour(this.startHour).minute(this.startMinute),a=moment(this.dates[1]).hour(this.endHour).minute(this.endMinute);return s<=a}}}defaultDatesValid(){if(void 0===this.defaults||!this.defaults)return!1;this.max&&moment(this.defaults[0])>moment(this.max)&&(this.defaults[0]=!1,console.warn("Datepicker.js - WARNING: Tried to set a default start date greater than max, default start date will not be set.")),this.min&&moment(this.defaults[0])<moment(this.min)&&(this.defaults[0]=!1,console.warn("Datepicker.js - WARNING: Tried to set a default start date less than min, default start datewill not be set.")),this.max&&moment(this.defaults[1])>moment(this.max)&&(this.defaults[1]=!1,console.warn("Datepicker.js - WARNING: Tried to set a default end date greater than max, default end date will not be set.")),this.min&&moment(this.defaults[1])<moment(this.min)&&(this.defaults[1]=!1,console.warn("Datepicker.js - WARNING: Tried to set a default end date less than min, default end datewill not be set."))}setTime(t=!1,e=null){if(this.timePicker){if(this.startHour=parseInt(this.timeElements.startHourValueEl.value),this.startMinute=parseInt(this.timeElements.startMinuteValueEl.value),this.singleDate||(this.endHour=parseInt(this.timeElements.endHourValueEl.value),this.endMinute=parseInt(this.timeElements.endMinuteValueEl.value)),t){let i=moment(this.dates[0]).hours();i||(i=12);let s=this.singleDate?"":moment(this.dates[1]).hours();s||(s=12),this.timeElements.startHourValueEl.value=this.militaryTime?i:this.toAmPm(i),this.timeElements.startMinuteValueEl.value=this.dates[0]?10>moment(this.dates[0]).minutes()?moment(this.dates[0]).minutes()+"0":moment(this.dates[0]).minutes():this.timeElements.startMinuteValueEl.value,this.singleDate||(this.timeElements.endHourValueEl.value=this.militaryTime?s:this.toAmPm(s),this.timeElements.endMinuteValueEl.value=this.dates[1]?10>moment(this.dates[1]).minutes()?moment(this.dates[1]).minutes()+"0":moment(this.dates[1]).minutes():this.timeElements.endMinuteValueEl.value,this.endHour=s,this.endMinute=parseInt(this.timeElements.endMinuteValueEl.value)),this.startHour=i,this.startMinute=parseInt(this.timeElements.startMinuteValueEl.value),this.militaryTime||(this.singleDate||(this.endAmPm=this.endHour>12?"PM":"AM","PM"===this.endAmPm?setTimeout((function(){this.timeElements.endpm.click()}).bind(this),500):setTimeout((function(){this.timeElements.endam.click()}).bind(this),500)),this.startAmPm=this.startHour>12?"PM":"AM","PM"===this.startAmPm?setTimeout((function(){this.timeElements.startpm.click()}).bind(this),500):setTimeout((function(){this.timeElements.startam.click()}).bind(this),500))}else this.militaryTime||("PM"===this.startAmPm&&(this.startHour=this.toMilitary(this.timeElements.startHourValueEl.value)),this.singleDate||"PM"!==this.endAmPm||(this.endHour=this.toMilitary(this.timeElements.endHourValueEl.value)),12===parseInt(this.timeElements.startHourValueEl.value)&&"AM"===this.startAmPm&&(this.startHour=0),this.singleDate||12!==parseInt(this.timeElements.endHourValueEl.value)||"AM"!==this.endAmPm||(this.endHour=0));let a="";this.singleDate||(a=this.dates[1]);let n=this.dates[0];this.dates=[],n&&(this.dates[0]=moment(n).hour(this.startHour).minute(this.startMinute).format(this.format),this.startDateElement.innerHTML=this.dates[0]),a&&!this.singleDate&&(this.dates[1]=moment(a).hour(this.endHour).minute(this.endMinute).format(this.format),this.endDateElement.innerHTML=this.dates[1]),this.onChange(),this.timeValid()||(null==e&&(e=document.querySelector(".startTimeElement")),this.flashWarning(e,2,(function(){if(e.closest("[class$='TimeElement']").classList.contains("startTimeElement")){this.startHour=parseInt(this.timeElements.endHourValueEl.value),this.startMinute=parseInt(this.timeElements.endMinuteValueEl.value),this.militaryTime||(this.startAmPm=this.endAmPm);let t=this.endMinute,i=this.militaryTime?this.endHour:this.toAmPm(this.endHour);this.timeElements.startMinuteValueEl.value=t<10?t+"0":t,this.timeElements.startHourValueEl.value=i,this.militaryTime||("PM"===this.startAmPm?(this.timeElements.startpm.setAttribute("SELECTED","true"),this.timeElements.startam.removeAttribute("SELECTED")):(this.timeElements.startam.setAttribute("SELECTED","true"),this.timeElements.startpm.removeAttribute("SELECTED")))}else{this.endHour=parseInt(this.timeElements.startHourValueEl.value),this.endMinute=parseInt(this.timeElements.startMinuteValueEl.value),this.militaryTime||(this.endAmPm=this.startAmPm);let s=this.startMinute,a=this.militaryTime?this.startHour:this.toAmPm(this.startHour);this.timeElements.endMinuteValueEl.value=s<10?s+"0":s,this.timeElements.endHourValueEl.value=a,this.militaryTime||("PM"===this.endAmPm?(this.timeElements.endpm.setAttribute("SELECTED","true"),this.timeElements.endam.removeAttribute("SELECTED")):(this.timeElements.endam.setAttribute("SELECTED","true"),this.timeElements.endpm.removeAttribute("SELECTED")))}this.setTime()}).bind(this)))}}value(t,e){if(e&&"string"==typeof e||(e=this.format),"object"==typeof t){if(this.dates=[],t.length&&t[0]?("string"==typeof t[0]&&(t[0]=this.convertStringDate(t[0])),this.dates[0]=moment(t[0]).format(e)):this.defaults&&this.defaults.length?this.dates[0]=moment(this.defaults[0]).format(e):(this.singleDate||console.warn("Datepicker.js - WARNING: Use Datepicker.startDate(value) or Datepicker.endDate(value) to set single values. Your date will be set as the start date by default. "),this.dates[0]=moment(t).format(e)),2===t.length&&t[1]?("string"==typeof t[1]&&(t[1]=this.convertStringDate(t[1])),this.dates[1]=moment(t[1]).format(e)):this.defaults&&2===this.defaults.length?this.dates[1]=moment(this.defaults[1]).format(e):this.dates[1]=moment(this.dates[0]).format(e),2===this.dates.length&&moment(this.dates[0])>moment(this.dates[1])){let i=[];console.warn("Datepicker.js - WARNING: Tried to set a startDate greater than endDate, your dates were swapped to be chronologically correct."),i[0]=this.dates[1],i[1]=this.dates[0],this.dates=i}}else if(t){if(("string"==typeof t||"number"==typeof t)&&(this.singleDate||console.warn("Datepicker.js - WARNING: Use Datepicker.startDate(value) or Datepicker.endDate(value) to set single values. Your date will be set as the start date by default. "),this.dates[0]=moment(this.dates[1]).format(e),2===this.dates.length&&moment(this.dates[0])>moment(this.dates[1]))){let s=[];console.warn("Datepicker.js - WARNING: Tried to set a startDate greater than endDate, your dates were swapped to be chronologically correct."),s[0]=this.dates[1],s[1]=this.dates[0],this.dates=s}}else{if(this.dates[0]?this.dates[0]=moment(this.dates[0]).format(e):this.defaults&&this.defaults.length&&(this.dates[0]=moment(this.defaults[0]).format(e)),this.dates[1]?this.dates[1]=moment(this.dates[1]).format(e):this.defaults&&2===this.defaults.length&&(this.dates[1]=moment(this.defaults[1]).format(e)),this.singleDate)return new Date(this.dates[0]);{let a=[];return a[0]=new Date(this.dates[0]),a[1]=new Date(this.dates[1]),e?[moment(a[0]).format(e),moment(a[1]).format(e)]:a}}this.snapTo(this.dates[0]),this.onChange(),this.highlightDates(),this.setTime(),this.calendarElement.hideCalendar(),t[1]&&(t[1],1)||this.singleDate||t[0]&&(t[0],1)?t[1]&&(t[1],1)||this.singleDate?t[0]&&(t[0],1)||this.singleDate||console.warn("Datepicker.js - WARNING: No start date value provided, or tried to set [start, end] date with invalid or null start date value, start date will be set to default if provided."):console.warn("Datepicker.js - WARNING: No end date value provided, or tried to set [start, end] date with invalid or null end date value, end date will be set to default if provided."):console.warn("Datepicker.js - ERROR: Tried to set dates with invalid format or null values, start/end dates will be set to defaults if provided.")}startDate(t){if(null==t||!t)return new Date(this.dates[0]);this.value([t,this.dates[1]||this.defaults[1]||null])}endDate(t){if(null==t||!t)return new Date(this.dates[1]);this.value([this.dates[0]||this.defaults[0]||null,t])}nextMonth(t,e){"number"!=typeof e&&(e=1);let i=this.onChange;this.onChange=function(){},this.containerElement.innerHTML="",this.moment.add(e,"months"),this.drawCalendar(),this.drawInputElement(),this.presetMenu&&(this.drawPresetMenu(),this.closePresetMenu()),this.highlightDates(),this.timePicker&&this.setTime(),this.openCalendar(),this.onChange=i,this.calendarPlacement()}lastMonth(t,e){"number"!=typeof e&&(e=-1);let i=this.onChange;this.onChange=function(){},this.containerElement.innerHTML="",this.moment.add(e,"months"),this.drawCalendar(),this.drawInputElement(),this.presetMenu&&(this.drawPresetMenu(),this.closePresetMenu()),this.highlightDates(),this.timePicker&&this.setTime(),this.openCalendar(),this.onChange=i,this.calendarPlacement()}snapTo(t,e){t||(t=this.moment);let i=!!this.max&&moment(this.max).unix(),s=!!this.min&&moment(this.min).unix(),a=moment(t).unix();i&&i<a&&(t=moment(this.max)),t=s&&s>a?moment(this.min):moment(t),this.moment=t;let n=this.onChange;this.onChange=function(){},this.isVisible(this.calendarElement)||e?(this.containerElement.innerHTML="",this.drawCalendar(),this.drawInputElement(),this.presetMenu&&(this.drawPresetMenu(),this.closePresetMenu()),this.timePicker&&this.setTime(!0),this.highlightDates(),this.openCalendar()):(this.containerElement.innerHTML="",this.drawCalendar(),this.drawInputElement(),this.presetMenu&&(this.drawPresetMenu(),this.closePresetMenu()),this.timePicker&&this.setTime(!0),this.highlightDates(),this.closeCalendar()),this.onChange=n,this.calendarPlacement()}toAmPm(t){return 12===(t=parseInt(t))?12:t%12}toMilitary(t){return(t=12===(t=parseInt(t))?t=0:t)<12?t+12:t}convertStringDate(t){t=t.split(" ");let e="",i="";for(var s=0;s<t.length;s++)"PM"===t[s].toUpperCase()?(i="PM",t.splice(s,1)):"AM"===t[s].toUpperCase()?(i="AM",t.splice(s,1)):e=e+" "+t[s];let a=moment(e).hour(),n=moment(e);return"PM"===i&&a<12&&n.hour(a+12),n}dayClick(t){if(!this.timePicker||(this.startHour=parseInt(this.timeElements.startHourValueEl.value),this.startMinute=parseInt(this.timeElements.startMinuteValueEl.value),this.singleDate||(this.endHour=parseInt(this.timeElements.endHourValueEl.value),this.endMinute=parseInt(this.timeElements.endMinuteValueEl.value)),this.militaryTime||("PM"===this.startAmPm&&(this.startHour=this.toMilitary(this.timeElements.startHourValueEl.value)),"PM"!==this.endAmPm||this.singleDate||(this.endHour=this.toMilitary(this.timeElements.endHourValueEl.value)),12===parseInt(this.timeElements.startHourValueEl.value)&&"AM"===this.startAmPm&&(this.startHour=0),"AM"!==this.endAmPm||this.singleDate||12!==parseInt(this.timeElements.endHourValueEl.value)||(this.endHour=0))),this.singleDate)this.dates=[],this.dates[0]=moment(t.value).set({h:this.startHour,m:this.startMinute}).format(this.format),this.startDateElement.innerHTML=this.dates[0];else if(this.dates.length>1||this.dates.length<1)this.dates=[],this.dates[0]=moment(t.value).set({h:this.startHour,m:this.startMinute}).format(this.format),this.timePicker?(this.startDateElement.innerHTML=this.dates[0],this.endDateElement.innerHTML="--/--/----  --:--"):(this.startDateElement.innerHTML=this.dates[0],this.endDateElement.innerHTML="--/--/---- ");else{let e=moment(this.dates[0]).set({h:this.startHour,m:this.startMinute}).unix(),i=moment(t.value).hour(this.endHour).minute(this.endMinute).unix();if(e>i){let s=this.dates[0];this.dates=[],this.dates[1]=moment(s).set({h:this.endHour,m:this.endMinute}).format(this.format),this.dates[0]=moment(t.value).set({h:this.startHour,m:this.startMinute}).format(this.format),this.startDateElement.innerHTML=this.dates[0],this.endDateElement.innerHTML=this.dates[1]}else this.dates[1]=moment(t.value).set({h:this.endHour,m:this.endMinute}).format(this.format),this.endDateElement.innerHTML=this.dates[1]}this.onChange(),!this.singleDate&&2===this.dates.length&&this.options.autoClose?setTimeout((function(){this.closeCalendar()}).bind(this),400):this.singleDate&&1===this.dates.length&&this.options.autoClose&&setTimeout((function(){this.closeCalendar()}).bind(this),400),this.highlightDates(),this.drawInputElement(),(2===this.dates.length||this.singleDate)&&this.options.autoClose&&setTimeout((function(){this.closeCalendar()}).bind(this),700)}isOutsideCalendar(t){return!this.calendarElement.contains(t.target)&&this.isVisible(this.calendarElement)&&!this.inputElement.contains(t.target)&&!t.target.classList.contains("leftArrow")&&!t.target.classList.contains("rightArrow")&&!t.target.classList.contains("decrease-year-button")&&!t.target.classList.contains("increase-year-button")}outsideCalendarClick(t){this.isOutsideCalendar(t)&&(this.closeCalendar(),this.drawInputElement())}calendarPlacement(){let t=this.containerElement.querySelector(".grid-container"),e={windowWidth:window.innerWidth,windowHeight:window.innerHeight,calendarWidth:t.getBoundingClientRect().width,calendarHeight:t.getBoundingClientRect().height,containerHeight:this.containerElement.getBoundingClientRect().height,containerWidth:this.containerElement.getBoundingClientRect().width,datepickerTop:this.containerElement.querySelector(".date").getBoundingClientRect().top,datepickerBottom:this.containerElement.querySelector(".date").getBoundingClientRect().bottom,datepickerRight:this.containerElement.querySelector(".date").getBoundingClientRect().right,datepickerLeft:this.containerElement.querySelector(".date").getBoundingClientRect().left,datepickerWidth:this.containerElement.querySelector(".date").getBoundingClientRect().width,datepickerHeight:this.containerElement.querySelector(".date").getBoundingClientRect().height,screenCenterX:window.outerWidth/2,screenCenterY:window.outerHeight/2},i,s;e.windowWidth>750?(e.windowWidth-e.datepickerRight<e.calendarWidth+10?(e.datepickerLeft<e.calendarWidth+10?e.datepickerRight=e.datepickerRight-e.datepickerWidth-.5*e.calendarWidth:e.datepickerRight=e.datepickerLeft-e.calendarWidth,s=e.datepickerRight):s=e.datepickerLeft+.5*e.datepickerWidth,e.calendarHeight>e.windowHeight-(e.datepickerTop+e.datepickerHeight)?(e.datepickerTop<e.calendarHeight+e.datepickerHeight?e.datepickerTop=20:e.datepickerTop=e.datepickerTop-e.calendarHeight,e.datepickerHeight=.5*e.datepickerHeight,i=e.datepickerTop):i=e.datepickerHeight+e.datepickerTop+5):window.outerWidth>450?(i=2,s=e.screenCenterX-e.calendarWidth/2>0?e.screenCenterX-e.calendarWidth/2:e.datepickerLeft):(i=2,s=-2),t.style.position="fixed",t.style.left=s+"px",t.style.top=i+"px",t.style.zIndex="9999999"}isVisible(t){return!!t&&!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&("grid"===t.style.display||"block"===t.style.display||""===t.style.visibility)}openCalendar(){this.calendarElement.showCalendar(),this.calendarPlacement(),this.highlightDates(),this.calendarPlacement()}closeCalendar(){if(this.onClose(),!this.dates.length&&this.defaults&&this.defaults.length?(this.defaults[0]?(this.dates[0]=moment(this.defaults[0]).format(this.format),this.startDateElement.innerHTML=this.dates[0]):(this.dates[0]=moment().startOf("week").format(this.format),this.startDateElement.innerHTML=this.dates[0]),this.defaults[1]?this.singleDate||(this.dates[1]=moment(this.defaults[1]).format(this.format),this.endDateElement.innerHTML=this.dates[1]):this.singleDate||(this.dates[1]=moment().endOf("week").format(this.format),this.endDateElement.innerHTML=this.dates[1])):this.defaults&&!this.dates.length&&(this.singleDate||(this.dates[1]=moment().endOf("week").format(this.format),this.endDateElement.innerHTML=this.dates[1]),this.dates[0]=moment().startOf("week").format(this.format),this.startDateElement.innerHTML=this.dates[0]),1===this.dates.length&&this.defaults&&2===this.defaults.length&&this.defaults[1]?this.singleDate||(this.dates[1]=moment(this.defaults[1]).format(this.format),this.endDateElement.innerHTML=this.dates[1],this.startDateElement.innerHTML=this.dates[0]):1!==this.dates.length||!this.defaults||this.defaults[1]||this.singleDate||(this.dates[1]=moment(this.dates[0]).format(this.format),this.endDateElement.innerHTML=this.dates[1],this.startDateElement.innerHTML=this.dates[0]),2===this.dates.length&&moment(this.dates[0])>moment(this.dates[1])){let t=[];console.warn("Datepicker.js - WARNING: Tried to set a startDate greater than endDate, your dates were swapped to be chronologically correct."),t[0]=this.dates[1],t[1]=this.dates[0],this.dates=t}this.setTime(),this.calendarElement.hideCalendar(),this.drawInputElement()}openPresetMenu(){this.presetMenuContainer.showPresetMenu()}closePresetMenu(){this.presetMenuContainer.hidePresetMenu()}resetCalendar(){this.reset(!0)}reset(t){void 0!==t&&t||(t=!1),this.dates=[],this.containerElement.innerHTML="",this.drawCalendar(),this.drawInputElement(),this.presetMenu&&(this.drawPresetMenu(),this.closePresetMenu()),this.onChange(),this.snapTo(new Date),t?setTimeout(this.openCalendar,10):this.closeCalendar()}}