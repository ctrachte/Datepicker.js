export default class Datepicker{constructor(e){if(!e||typeof e===void 0)throw"Error: Datepicker.js options object must be defined, with at least options.containerElement.";if(void 0===e.containerElement||!e.containerElement)throw"Error: you must specify a container element in the Datepicker.js options object!";Element.prototype.hideDatepickerEl=function(){this.style.visibility="hidden"},Element.prototype.showDatepickerEl=function(){this.style.visibility=""},Element.prototype.hideContainer=function(){this.style.display="none"},Element.prototype.showContainer=function(){this.style.display="block"},Element.prototype.hideCalendar=function(){this.style.display="none"},Element.prototype.showCalendar=function(){this.style.display="grid"},Element.prototype.hidePresetMenu=function(){this.style.display="none"},Element.prototype.showPresetMenu=function(){this.style.display="flex"},this.options=e,this.max=!("object"!=typeof this.options.max)&&this.options.max,this.min=!("object"!=typeof this.options.min)&&this.options.min,this.containerElement=e.containerElement,this.containerElement.classList.add("DatepickerContainer"),this.timePicker=!(this.options.timePicker!==void 0)||this.options.timePicker,this.presetMenu=!(this.options.presetMenu!==void 0)||this.options.presetMenu,this.menuOptions=this.options.menuOptions===void 0?[]:this.options.menuOptions,this.autoClose=this.options.autoClose!==void 0&&this.options.autoClose,this.singleDate=this.options.singleDate!==void 0&&this.options.singleDate,this.clearDates=this.options.clearDates!==void 0&&this.options.clearDates,this.leadingTrailingDates=!(this.options.leadingTrailingDates!==void 0)||this.options.leadingTrailingDates,this.militaryTime=this.options.militaryTime!==void 0&&this.options.militaryTime,this.format=this.options.format||(this.timePicker?this.militaryTime?"MM/DD/YYYY HH:mm:ss":"MM/DD/YYYY hh:mm A":"MM/DD/YYYY"),this.startDateLabel=this.singleDate?this.options.startDateLabel===void 0?"Date: ":this.options.startDateLabel:this.options.startDateLabel===void 0?"Start Date: ":this.options.startDateLabel,this.endDateLabel=this.options.endDateLabel===void 0?"End Date: ":this.options.endDateLabel,this.moment=this.max&&moment(this.max).unix()<moment().unix()?moment(moment(this.max),this.format,!0):moment(moment(),this.format,!0),this.moment=this.min&&moment(this.min).unix()>moment().unix()?moment(moment(this.min),this.format,!0):moment(moment(),this.format,!0),this.onChange=this.options.onChange===void 0?function(){}:this.options.onChange,this.onSubmit=this.options.onSubmit===void 0?function(){}:this.options.onSubmit,this.onClose=this.options.onClose===void 0?function(){}:this.options.onClose,this.drawCalendar=this.drawCalendar.bind(this),this.dayClick=this.dayClick.bind(this),this.nextMonth=this.nextMonth.bind(this),this.lastMonth=this.lastMonth.bind(this),this.highlightDates=this.highlightDates.bind(this),this.inputElement=document.createElement("div"),this.drawInputElement=this.drawInputElement.bind(this),this.openCalendar=this.openCalendar.bind(this),this.closeCalendar=this.closeCalendar.bind(this),this.openPresetMenu=this.openPresetMenu.bind(this),this.closePresetMenu=this.closePresetMenu.bind(this),this.resetCalendar=this.resetCalendar.bind(this),this.reset=this.reset.bind(this),this.value=this.value.bind(this),this.startDate=this.startDate.bind(this),this.endDate=this.endDate.bind(this),this.outsideCalendarClick=this.outsideCalendarClick.bind(this),this.isOutsideCalendar=this.isOutsideCalendar.bind(this),this.leadingTrailing=this.leadingTrailing.bind(this),this.defaultDatesValid=this.defaultDatesValid.bind(this),this.drawPresetMenu=this.drawPresetMenu.bind(this),this.drawStartTimePicker=this.drawStartTimePicker.bind(this),this.drawEndTimePicker=this.drawEndTimePicker.bind(this),this.snapTo=this.snapTo.bind(this),this.toAmPm=this.toAmPm.bind(this),this.timeValid=this.timeValid.bind(this),this.dates=[],this.defaults=!(this.options.defaults!==void 0)||this.options.defaults,this.defaultsValid=this.defaultDatesValid();this.defaultsValid&&this.defaults&&(this.defaults=[],this.defaults[0]&&(this.defaults[0]=!!("object"==typeof this.options.defaults&&this.options.defaults.length)&&moment(this.options.defaults[0]).format(this.format)),this.defaults[0]&&(this.dates[0]=this.defaults[0]),this.singleDate||(this.defaults[1]="object"==typeof this.options.defaults&&2===this.options.defaults.length&&moment(this.options.defaults[1]).format(this.format),this.defaults[1]&&(this.dates[1]=this.defaults[1])));this.timeElements={},this.startHour="12",this.startMinute="00",this.startAmPm="PM",this.endHour="12",this.endMinute="00",this.endAmPm="PM",this.drawCalendar(),this.drawInputElement(),this.presetMenu&&(this.drawPresetMenu(),this.closePresetMenu());this.calendarPlacement(),this.calendarElement.hideCalendar()}drawInputElement(){this.inputElement.innerHTML="",this.inputElement.setAttribute("class","launch");let e=document.createElement("div"),t=document.createElement("div"),a=document.createElement("div"),n=document.createElement("div"),i=document.createElement("div"),l=document.createElement("div");t.innerHTML=this.startDateLabel,e.setAttribute("class","startBlock"),t.setAttribute("class","heading"),e.appendChild(t),e.appendChild(i),i.innerHTML=moment(this.dates[0]).format(this.format),i.setAttribute("class","date"),this.inputElement.appendChild(e),a.setAttribute("class","heading"),this.singleDate||(a.innerHTML=this.endDateLabel,n.appendChild(a),l.setAttribute("class","date"),n.appendChild(l),n.setAttribute("class","endBlock"),this.inputElement.appendChild(n)),i.innerHTML=this.dates[0]?moment(this.dates[0]).format(this.format):this.timePicker?" --/--/----  --:-- ":" --/--/---- ",this.singleDate||(this.dates[1]&&typeof this.dates[1]!==void 0?l.innerHTML=moment(this.dates[1]).format(this.format):this.timePicker?l.innerHTML=" --/--/----  --:-- ":l.innerHTML=" --/--/---- "),this.inputElement.addEventListener("click",function(){this.openCalendar()}.bind(this)),this.containerElement.appendChild(this.inputElement)}drawCalendar(){this.firstDayOfMonth=this.moment.startOf("month").format("dddd"),this.lastDayOfMonth=this.moment.endOf("month").format("dddd");let e=this.nextMonth,t=this.lastMonth,a=this.dayClick,n=document.createElement("div"),i=document.createElement("div");i.setAttribute("style","grid-column-start: 2; grid-column-end: 5;");let l=document.createElement("div");l.setAttribute("style","grid-column-start: 5; grid-column-end: 7;");let r=document.createElement("select");r.setAttribute("name","months"),r.setAttribute("class","datepicker-month-select"),r.setAttribute("aria-label","datepicker-month-select"),this.moment._locale._months.forEach(function(e,t){let a=document.createElement("option");a.innerHTML=e,a.value=t+1,e===this.moment._locale._months[this.moment.month()]&&(a.selected=!0),r.appendChild(a)}.bind(this)),r.addEventListener("change",function(){this.moment.month(r.value-1),this.snapTo()}.bind(this));let s=document.createElement("input");s.setAttribute("type","number"),s.setAttribute("name","year"),s.setAttribute("class","datepicker-year-input"),s.setAttribute("aria-label","datepicker-year-input"),s.value=this.moment.year(),s.addEventListener("change",function(){return 1900>parseInt(s.value)||2200<parseInt(s.value)?void(s.value=this.moment.year()):void(this.moment.year(s.value),this.snapTo())}.bind(this));let d=document.createElement("span");d.innerHTML="&#43;",d.setAttribute("class","increase-year-button"),d.setAttribute("aria-label","Increase Year Button"),d.setAttribute("role","button"),d.addEventListener("click",function(){s.stepUp(),s.dispatchEvent(new Event("change"))}.bind(this));let o=document.createElement("span");if(o.innerHTML="&#x2212;",o.setAttribute("class","decrease-year-button"),o.setAttribute("aria-label","Decrease Year Button"),o.setAttribute("role","button"),o.addEventListener("click",function(){s.stepDown(),s.dispatchEvent(new Event("change"))}.bind(this)),this.menuIconContainer=document.createElement("div"),this.menuIconContainer.setAttribute("style","grid-column-start: 1; grid-column-end: 2; background-color: transparent !important;"),this.menuIconContainer.setAttribute("aria-label","Preset Menu Button"),this.menuIconContainer.setAttribute("role","menu"),this.presetMenu){let e=document.createElement("span");e.innerHTML="&#9776;",e.classList.add("calendarHamburger"),this.menuIconContainer.addEventListener("click",function(){this.menuIconContainer.classList.contains("open")?(this.closePresetMenu(),this.menuIconContainer.classList.remove("open")):(this.openPresetMenu(),this.menuIconContainer.classList.add("open"))}.bind(this)),this.menuIconContainer.appendChild(e)}let m=document.createElement("div");m.classList.add("leftArrow"),m.setAttribute("style","background-color: transparent !important;"),m.setAttribute("aria-label","Previous Month Button"),m.setAttribute("role","navigation"),m.innerHTML="&#11164;",m.addEventListener("click",t.bind(this));let u=document.createElement("div");u.classList.add("rightArrow"),u.setAttribute("style","background-color: transparent !important;"),u.setAttribute("aria-label","Next Month Button"),u.setAttribute("role","navigation"),u.innerHTML="&#11166;",u.addEventListener("click",e.bind(this)),i.appendChild(m),i.appendChild(r),i.appendChild(u),l.appendChild(o),l.appendChild(s),l.appendChild(d),i.classList.add("monthHeader"),l.classList.add("yearHeader"),n.classList.add("grid-container");let c=document.createElement("div");c.setAttribute("style","grid-column-start: 7; grid-column-end: 8; background-color: transparent !important;"),c.setAttribute("aria-label","Preset Menu Button"),c.setAttribute("role","button");let p=document.createElement("span");p.innerHTML="&#10006;",p.classList.add("close-calendar-button"),c.addEventListener("click",function(){this.closeCalendar()}.bind(this)),c.appendChild(p),n.appendChild(this.menuIconContainer),n.appendChild(i),n.appendChild(l),n.appendChild(c),this.moment._locale._weekdaysShort.forEach(function(e){let t=document.createElement("div");t.classList.add(e),t.classList.add("dayHeader"),"Sun"===e?t.setAttribute("aria-label","Sunday"):"Mon"===e?t.setAttribute("aria-label","Monday"):"Tue"===e?t.setAttribute("aria-label","Tuesday"):"Wed"===e?t.setAttribute("aria-label","Wednesday"):"Thu"===e?t.setAttribute("aria-label","Thursday"):"Fri"===e?t.setAttribute("aria-label","Friday"):"Sat"===e?t.setAttribute("aria-label","Saturday"):void 0,t.innerHTML=" "+e+" ",n.appendChild(t)});let E=Array.from(Array(this.moment.daysInMonth()).keys()),h=this.leadingTrailing(),v=this.moment._locale._weekdays.indexOf(this.firstDayOfMonth)+1,g=this.moment._locale._weekdays.indexOf(this.lastDayOfMonth)+1;if(this.leadingTrailingDates)for(let e,t=v-1;0<t;t--)e=document.createElement("div"),e.classList.add("prev-month-day-"+parseInt(h.trailing[t]+1)),e.classList.add("leading-trailing-day"),e.innerHTML=parseInt(h.trailing[t])+1,e.setAttribute("aria-label",parseInt(h.trailing[t]+1)+""),0==t&&e.classList.add("grid-column-start:0;"),n.appendChild(e);let M=!!this.max&&moment(this.max).unix(),b=!!this.min&&moment(this.min).unix();if(E.forEach(function(e){let t=document.createElement("div");t.classList.add("day-"+(parseInt(e)+1)),t.classList.add("day"),t.innerHTML=parseInt(e)+1;let i=moment(this.moment.format("MM")+"/"+parseInt(e+1)+"/"+this.moment.format("YYYY")).format(this.format);t.setAttribute("role","button"),t.setAttribute("aria-label",i),t.value=i;let l=moment(t.value).unix();M&&l>M?(t.classList.add("disabled"),t.setAttribute("disabled",!0)):b&&l<b?(t.classList.add("disabled"),t.setAttribute("disabled",!0)):t.addEventListener("click",a.bind(this,t)),n.appendChild(t)}.bind(this)),this.leadingTrailingDates)for(let e,t=1;t<8-g;t++)e=document.createElement("div"),e.classList.add("next-month-day-"+t),e.classList.add("leading-trailing-day"),e.innerHTML=t,e.setAttribute("aria-label","day-"+t+"-next-month"),0==t&&e.classList.add("grid-column-start:"+g+";"),n.appendChild(e);let C=n.querySelector(".day-1");C.setAttribute("style","grid-column-start: "+v+";"),this.startDateElement=document.createElement("div"),this.startDateHeader=document.createElement("div"),this.startDateHeader.innerHTML="<b>"+this.startDateLabel+"</b>",this.startDateContainer=document.createElement("div"),this.startDateContainer.classList.add("startDateElement"),this.endDateElement=document.createElement("div"),this.endDateHeader=document.createElement("div"),this.endDateHeader.innerHTML="<b>"+this.endDateLabel+"</b>",this.endDateContainer=document.createElement("div"),this.endDateContainer.classList.add("endDateElement"),this.singleDate?(this.startDateContainer.setAttribute("style","grid-column-start: 1; grid-column-end: 8;"),this.startDateElement.innerHTML=this.timePicker?"--/--/----  --:--":"--/--/----"):(this.startDateContainer.setAttribute("style","grid-column-start: 1; grid-column-end: 4;"),this.startDateElement.innerHTML=this.timePicker?"--/--/----  --:--":"--/--/----"),this.startDateContainer.appendChild(this.startDateHeader),this.startDateContainer.appendChild(this.startDateElement),n.appendChild(this.startDateContainer),this.calendarElement=n,this.timePicker?(this.drawStartTimePicker(),!this.singleDate&&(this.timePicker?(this.endDateContainer.setAttribute("style","grid-column-start: 1; grid-column-end: 4;"),this.endDateElement.innerHTML="--/--/----  --:--"):(this.endDateContainer.setAttribute("style","grid-column-start: 5; grid-column-end: 8;"),this.endDateElement.innerHTML="--/--/----"),this.endDateContainer.appendChild(this.endDateHeader),this.endDateContainer.appendChild(this.endDateElement),this.calendarElement.appendChild(this.endDateContainer),this.drawEndTimePicker())):!this.singleDate&&(this.timePicker?(this.endDateContainer.setAttribute("style","grid-column-start: 1; grid-column-end: 4;"),this.endDateElement.innerHTML="--/--/----  --:--"):(this.endDateContainer.setAttribute("style","grid-column-start: 5; grid-column-end: 8;"),this.endDateElement.innerHTML="--/--/----"),this.endDateContainer.appendChild(this.endDateHeader),this.endDateContainer.appendChild(this.endDateElement),this.calendarElement.appendChild(this.endDateContainer));let D=document.createElement("button");D.classList.add("cancelButton"),D.type="cancel",D.style.gridColumnStart=1,D.style.gridColumnEnd=3,D.addEventListener("click",function(){this.clearDates?this.resetCalendar():this.closeCalendar()}.bind(this)),this.clearDates?!0===this.defaults||this.defaults.length?D.innerHTML="&#x21BA;":D.innerHTML="&#10006;":(D.innerHTML="&#10006;",D.style.backgroundColor="grey"),n.appendChild(D);let f=document.createElement("button");f.classList.add("submitButton"),f.innerHTML="&#10004;",f.type="submit",f.style.gridColumnStart=3,f.style.gridColumnEnd=8,f.addEventListener("click",function(){this.onSubmit(),this.closeCalendar()}.bind(this)),n.appendChild(f),this.containerElement.appendChild(n),document.addEventListener("click",function(e){this.outsideCalendarClick(e)}.bind(this))}drawPresetMenu(){this.presetMenuContainer=document.createElement("div"),this.presetMenuContainer.setAttribute("class","presetMenuContainer");let e=document.createElement("ul"),t=new Date,a=[];if(a=this.singleDate?[{title:"Yesterday",values:[moment(t).add(-1,"day").hour(0).minute(0)]},{title:"Today",values:[moment(t).hour(0).minute(0)]},{title:"Tomorrow",values:[moment(t).add(1,"day").hour(0).minute(0)]}]:[{title:"This Week",values:[moment(t).startOf("week"),moment(t).endOf("week")]},{title:"Next Week",values:[moment(t).add(1,"week").startOf("week"),moment(t).add(1,"week").endOf("week")]},{title:"Last Week",values:[moment(t).add(-1,"week").startOf("week"),moment(t).add(-1,"week").endOf("week")]},{title:"This Month",values:[moment(t).startOf("month"),moment(t).endOf("month")]},{title:"Next Month",values:[moment(t).add(1,"month").startOf("month"),moment(t).add(1,"month").endOf("month")]},{title:"Last Month",values:[moment(t).add(-1,"month").startOf("month"),moment(t).add(-1,"month").endOf("month")]},{title:"This Year",values:[moment(t).startOf("year"),moment(t).endOf("year")]},{title:"Next Year",values:[moment(t).add(1,"year").startOf("year"),moment(t).add(1,"year").endOf("year")]},{title:"Last Year",values:[moment(t).add(-1,"year").startOf("year"),moment(t).add(-1,"year").endOf("year")]}],void 0!==this.menuOptions&&0<this.menuOptions.length){let e=!!this.max&&moment(this.max).unix(),t=!!this.min&&moment(this.min).unix();for(let n=0;n<this.menuOptions.length;n++){let i=moment(this.menuOptions[n].values[0]).unix(),l=moment(this.menuOptions[n].values[1]).unix();e&&e<l||t&&t>i?console.warn("Datepicker.js: Preset menu option: \""+this.menuOptions[n].title+"\" lies partially or entirely outside max/min allowed and was disabled."):a.push(this.menuOptions[n])}}for(let t of a){let a=!!this.max&&moment(this.max).unix(),n=!!this.min&&moment(this.min).unix(),i=moment(t.values[0]).unix(),l=moment(t.values[1]).unix();if(a&&a<l||n&&n>i)console.warn("Datepicker.js: Preset menu option: \""+t.title+"\" lies partially or entirely outside max/min allowed and was disabled.");else{let a=document.createElement("li");a.setAttribute("class",t.title+"-menu-option"),a.innerHTML=t.title,a.addEventListener("click",function(){this.dates.length=0,this.highlightDates(),this.dates[0]=t.values[0],this.singleDate||(this.dates[1]=t.values[1]);let e=this.onChange;this.onChange=function(){},this.highlightDates(),this.snapTo(this.dates[0],!0),this.timePicker?this.setTime(!0):(this.startDateElement.innerHTML=moment(this.dates[0]).format(this.format),!this.singleDate&&(this.endDateElement.innerHTML=moment(this.dates[1]).format(this.format))),this.drawInputElement(),this.onChange=e,this.onChange(),this.menuIconContainer.classList.remove("open")}.bind(this)),e.appendChild(a)}}let n=document.createElement("div");n.setAttribute("style","background-color: transparent !important;"),n.setAttribute("aria-label","Preset Menu Close Button"),n.setAttribute("role","button");let i=document.createElement("span");i.innerHTML="&#10006;",i.classList.add("close-preset-menu"),n.addEventListener("click",function(){this.closePresetMenu(),this.menuIconContainer.classList.remove("open")}.bind(this)),n.appendChild(i),this.presetMenuContainer.appendChild(n),this.presetMenuContainer.appendChild(e),this.calendarElement.appendChild(this.presetMenuContainer)}drawStartTimePicker(){let e=document.createElement("div");e.classList.add("startTimeElement"),this.singleDate?(e.style.gridColumnStart=1,e.style.gridColumnEnd=8):(e.style.gridColumnStart=4,e.style.gridColumnEnd=8),this.militaryTime||(this.startHour=this.toAmPm(parseInt(this.startHour)));let t=document.createElement("div");t.classList.add("hour"),t.innerHTML="<input id='startHour' type='number' min='1' max='23' value='"+this.startHour+"' />",t.style.gridColumn="1 / span 2";let a=t.querySelector("#startHour");this.timeElements.startHourValueEl=a;let n=function(){let e=this.militaryTime?parseInt(this.timeElements.startHourValueEl.value):this.toMilitary(parseInt(this.timeElements.startHourValueEl.value));23<e?e=0:1>e&&(e=23),10>e&&this.militaryTime&&(e="0"+e),this.timeElements.startHourValueEl.value=this.militaryTime?e:this.toAmPm(e),this.setTime()}.bind(this);a.addEventListener("change",n),a.addEventListener("click",function(){setTimeout(function(){a.select()},100)});let i=document.createElement("span");i.classList.add("TimeUpDown"),i.innerHTML="<div>&#9650;</div><div>&#9660;</div>",i.querySelectorAll("div")[0].onclick=function(){a.value++,this.timeValid()?a.dispatchEvent(new Event("change")):a.value--}.bind(this),i.querySelectorAll("div")[1].onclick=function(){a.value--,this.timeValid()?a.dispatchEvent(new Event("change")):a.value++}.bind(this),t.appendChild(i),e.appendChild(t);let l=document.createElement("div");l.innerHTML=":",l.classList.add("timeColon"),l.style.gridColumn="3 / span 1",e.appendChild(l),10>parseInt(this.startMinute)&&(this.startMinute="0"+parseInt(this.startMinute));let r=document.createElement("div");r.classList.add("minute"),r.innerHTML="<input type='number' min='1' max='59' value='"+this.startMinute+"' />",r.style.gridColumn="4 / span 2";let s=r.querySelector("input");this.timeElements.startMinuteValueEl=s;let d=function(){let e=parseInt(this.timeElements.startMinuteValueEl.value);59<e?e=0:0>e&&(e=45),10>e&&(e="0"+e),this.timeElements.startMinuteValueEl.value=e,this.setTime()}.bind(this);s.addEventListener("change",d),s.addEventListener("click",function(){setTimeout(function(){s.select()},100)});let o=document.createElement("span");if(o.classList.add("TimeUpDown"),o.innerHTML="<div>&#9650;</div><div>&#9660;</div>",o.querySelectorAll("div")[0].onclick=function(){s.value=0==s.value%15||0===parseInt(s.value)?parseInt(s.value)+15:parseInt(s.value)+1,this.timeValid()?s.dispatchEvent(new Event("change")):0==s.value%15||0===parseInt(s.value)?s.value=parseInt(s.value)-15:s.value=parseInt(s.value)-1}.bind(this),o.querySelectorAll("div")[1].onclick=function(){s.value=0==s.value%15||0===parseInt(s.value)?parseInt(s.value)-15:parseInt(s.value)-1,this.timeValid()?s.dispatchEvent(new Event("change")):0==s.value%15||0===parseInt(s.value)?s.value=parseInt(s.value)+15:s.value=parseInt(s.value)+1}.bind(this),r.appendChild(o),e.appendChild(r),!this.militaryTime){let t=document.createElement("div");t.classList.add("ampm"),t.innerHTML="",t.style.gridColumn="6 / span 1",this.timeElements.startampm=t;let a=document.createElement("div");a.classList.add("am"),a.innerHTML="AM",a.onclick=function(){this.startAmPm="AM",this.timeValid()?(a.setAttribute("SELECTED","true"),n.removeAttribute("SELECTED"),this.setTime()):(this.startAmPm="PM",this.setTime())}.bind(this),t.appendChild(a);let n=document.createElement("div");n.classList.add("pm"),n.innerHTML="PM",n.onclick=function(){this.startAmPm="PM",this.timeValid()?(n.setAttribute("SELECTED","true"),a.removeAttribute("SELECTED"),this.setTime()):(this.startAmPm="AM",this.setTime())}.bind(this),"PM"===this.startAmPm?(n.setAttribute("SELECTED","true"),a.removeAttribute("SELECTED")):(a.setAttribute("SELECTED","true"),n.removeAttribute("SELECTED")),this.timeElements.startam=a,this.timeElements.startpm=n,t.appendChild(n),e.appendChild(t)}this.calendarElement.appendChild(e)}drawEndTimePicker(){if(!this.singleDate){let e=document.createElement("div");e.classList.add("endTimeElement"),e.style.gridColumnStart=4,e.style.gridColumnEnd=8,this.militaryTime||(this.endHour=this.toAmPm(parseInt(this.endHour)));let t=document.createElement("div");t.classList.add("hour"),t.innerHTML="<input id='endHour' type='number' min='1' max='23' value='"+this.endHour+"' />",t.style.gridColumn="1 / span 2";let a=t.querySelector("#endHour");this.timeElements.endHourValueEl=a;let n=function(){let e=this.militaryTime?parseInt(this.timeElements.endHourValueEl.value):this.toMilitary(parseInt(this.timeElements.endHourValueEl.value));23<e?e=0:1>e&&(e=23),10>e&&this.militaryTime&&(e="0"+e),this.timeElements.endHourValueEl.value=this.militaryTime?e:this.toAmPm(e),this.setTime()}.bind(this);a.addEventListener("change",n),a.addEventListener("click",function(){setTimeout(function(){a.select()},100)});let i=document.createElement("span");i.classList.add("TimeUpDown"),i.innerHTML="<div>&#9650;</div><div>&#9660;</div>",i.querySelectorAll("div")[0].onclick=function(){a.value++,this.timeValid()?a.dispatchEvent(new Event("change")):a.value--}.bind(this),i.querySelectorAll("div")[1].onclick=function(){a.value--,this.timeValid()?a.dispatchEvent(new Event("change")):a.value++}.bind(this),t.appendChild(i),e.appendChild(t);let l=document.createElement("div");l.innerHTML=":",l.classList.add("timeColon"),l.style.gridColumn="3 / span 1",e.appendChild(l),10>parseInt(this.endMinute)&&(this.endMinute="0"+parseInt(this.endMinute));let r=document.createElement("div");r.classList.add("minute"),r.innerHTML="<input type='number' min='1' max='59' value='"+this.endMinute+"' />",r.style.gridColumn="4 / span 2";let s=r.querySelector("input");this.timeElements.endMinuteValueEl=s;let d=function(){let e=parseInt(this.timeElements.endMinuteValueEl.value);59<e?e=0:0>e&&(e=45),10>e&&(e="0"+e),this.timeElements.endMinuteValueEl.value=e,this.setTime()}.bind(this);s.addEventListener("change",d),s.addEventListener("click",function(){setTimeout(function(){s.select()},100)});let o=document.createElement("span");if(o.classList.add("TimeUpDown"),o.innerHTML="<div>&#9650;</div><div>&#9660;</div>",o.querySelectorAll("div")[0].onclick=function(){s.value=0==s.value%15||0===parseInt(s.value)?parseInt(s.value)+15:parseInt(s.value)+1,this.timeValid()?s.dispatchEvent(new Event("change")):0==s.value%15||0===parseInt(s.value)?s.value=parseInt(s.value)-15:s.value=parseInt(s.value)-1}.bind(this),o.querySelectorAll("div")[1].onclick=function(){s.value=0==s.value%15||0===parseInt(s.value)?parseInt(s.value)-15:parseInt(s.value)-1,this.timeValid()?s.dispatchEvent(new Event("change")):0==s.value%15||0===parseInt(s.value)?s.value=parseInt(s.value)+15:s.value=parseInt(s.value)+1}.bind(this),r.appendChild(o),e.appendChild(r),this.calendarElement.appendChild(e),!this.militaryTime){let t=document.createElement("div");t.classList.add("ampm"),t.innerHTML="",t.style.gridColumn="6 / span 1",this.timeElements.endampm=t;let a=document.createElement("div");a.classList.add("am"),a.innerHTML="AM",a.onclick=function(){this.endAmPm="AM",this.timeValid()?(a.setAttribute("SELECTED","true"),n.removeAttribute("SELECTED"),this.setTime()):(this.endAmPm="PM",this.setTime())}.bind(this),t.appendChild(a);let n=document.createElement("div");n.classList.add("pm"),n.innerHTML="PM",n.onclick=function(){this.endAmPm="PM",this.timeValid()?(n.setAttribute("SELECTED","true"),a.removeAttribute("SELECTED"),this.setTime()):(this.endAmPm="AM",this.setTime())}.bind(this),"PM"===this.endAmPm?(n.setAttribute("SELECTED","true"),a.removeAttribute("SELECTED")):(a.setAttribute("SELECTED","true"),n.removeAttribute("SELECTED")),t.appendChild(n),e.appendChild(t),this.timeElements.endam=a,this.timeElements.endpm=n}}}leadingTrailing(){let e=1===parseInt(this.moment.month())||0===parseInt(this.moment.month())?12:parseInt(this.moment.month()),t=1===parseInt(this.moment.month())||0===parseInt(this.moment.month())?parseInt(this.moment.year())-1:parseInt(this.moment.year()),a=parseInt(moment(t+"-"+e,"YYYY-MM").daysInMonth()),n=[],l=[];for(let e=1;8>e;e++)l.push(a),a--,n.push(e);return{leading:n,trailing:l}}highlightDates(){let e=this.containerElement.querySelectorAll(".day");0<this.dates.length&&2===this.dates.length?e.forEach(function(e){let t=moment(e.value).format("MM/DD/YYYY"),a=moment(this.dates[0]).format("MM/DD/YYYY"),n=moment(this.dates[1]).format("MM/DD/YYYY"),i=moment(e.value).format("X"),l=moment(this.dates[0]).format("X"),r=moment(this.dates[1]).format("X");a===t&&(e.classList.add("active"),e.setAttribute("aria-pressed","true")),n===t&&(e.classList.add("active"),e.setAttribute("aria-pressed","true")),i>l&&i<r&&e.classList.add("highlighted")}.bind(this)):e.forEach(function(e){let t=moment(e.value).format("MM/DD/YYYY"),a=moment(this.dates[0]).format("MM/DD/YYYY");a===t?(e.classList.add("active"),e.setAttribute("aria-pressed","true")):(e.classList.contains("active")&&(e.classList.remove("active"),e.setAttribute("aria-pressed","false")),e.classList.contains("highlighted")&&e.classList.remove("highlighted"))}.bind(this))}timeValid(){if(2===this.dates.length&&!this.singleDate&&this.timePicker){this.startHour=parseInt(this.timeElements.startHourValueEl.value),this.startMinute=parseInt(this.timeElements.startMinuteValueEl.value),this.endHour=parseInt(this.timeElements.endHourValueEl.value),this.endMinute=parseInt(this.timeElements.endMinuteValueEl.value),this.militaryTime||("PM"===this.startAmPm&&(this.startHour=this.toMilitary(this.timeElements.startHourValueEl.value)),"PM"===this.endAmPm&&(this.endHour=this.toMilitary(this.timeElements.endHourValueEl.value)),12===parseInt(this.timeElements.startHourValueEl.value)&&"AM"===this.startAmPm&&(this.startHour=0),12===parseInt(this.timeElements.endHourValueEl.value)&&"AM"===this.endAmPm&&(this.endHour=0));let e=moment(this.dates[0]).day()===moment(this.dates[1]).day(),t=moment(this.dates[0]).month()===moment(this.dates[1]).month(),a=moment(this.dates[0]).year()===moment(this.dates[1]).year();if(e&&t&&a){let e=moment(this.dates[0]).hour(this.startHour).minute(this.startMinute),t=moment(this.dates[1]).hour(this.endHour).minute(this.endMinute);return!(e>t)||(this.timeElements.startMinuteValueEl.classList.add("datepicker-error"),this.timeElements.startHourValueEl.classList.add("datepicker-error"),this.timeElements.startampm.classList.add("datepicker-error"),setTimeout(function(){this.timeElements.startMinuteValueEl.classList.remove("datepicker-error"),this.timeElements.startHourValueEl.classList.remove("datepicker-error"),this.timeElements.startampm.classList.remove("datepicker-error")}.bind(this),1e3),!1)}return!0}return!0}defaultDatesValid(){if("undefined"==typeof this.defaults||!this.defaults)return!1;this.max&&moment(this.defaults[0])>moment(this.max)&&(this.defaults[0]=!1,console.warn("Datepicker.js - WARNING: Tried to set a default start date greater than max, default start date will not be set.")),this.min&&moment(this.defaults[0])<moment(this.min)&&(this.defaults[0]=!1,console.warn("Datepicker.js - WARNING: Tried to set a default start date less than min, default start datewill not be set.")),this.max&&moment(this.defaults[1])>moment(this.max)&&(this.defaults[1]=!1,console.warn("Datepicker.js - WARNING: Tried to set a default end date greater than max, default end date will not be set.")),this.min&&moment(this.defaults[1])<moment(this.min)&&(this.defaults[1]=!1,console.warn("Datepicker.js - WARNING: Tried to set a default end date less than min, default end datewill not be set."))}setTime(e){if(e||(e=!1),this.timePicker){if(this.startHour=parseInt(this.timeElements.startHourValueEl.value),this.startMinute=parseInt(this.timeElements.startMinuteValueEl.value),this.singleDate||(this.endHour=parseInt(this.timeElements.endHourValueEl.value),this.endMinute=parseInt(this.timeElements.endMinuteValueEl.value)),e){let e=moment(this.dates[0]).hours();e||(e=12);let t=this.singleDate?"":moment(this.dates[1]).hours();t||(t=12),this.timeElements.startHourValueEl.value=this.militaryTime?e:this.toAmPm(e),this.timeElements.startMinuteValueEl.value=this.dates[0]?10>moment(this.dates[0]).minutes()?moment(this.dates[0]).minutes()+"0":moment(this.dates[0]).minutes():this.timeElements.startMinuteValueEl.value,this.singleDate||(this.timeElements.endHourValueEl.value=this.militaryTime?t:this.toAmPm(t),this.timeElements.endMinuteValueEl.value=this.dates[1]?10>moment(this.dates[1]).minutes()?moment(this.dates[1]).minutes()+"0":moment(this.dates[1]).minutes():this.timeElements.endMinuteValueEl.value,this.endHour=t,this.endMinute=parseInt(this.timeElements.endMinuteValueEl.value)),this.startHour=e,this.startMinute=parseInt(this.timeElements.startMinuteValueEl.value),this.militaryTime||(!this.singleDate&&(this.endAmPm=12<this.endHour?"PM":"AM","PM"===this.endAmPm?setTimeout(function(){this.timeElements.endpm.click()}.bind(this),500):setTimeout(function(){this.timeElements.endam.click()}.bind(this),500)),this.startAmPm=12<this.startHour?"PM":"AM","PM"===this.startAmPm?setTimeout(function(){this.timeElements.startpm.click()}.bind(this),500):setTimeout(function(){this.timeElements.startam.click()}.bind(this),500))}else this.militaryTime||("PM"===this.startAmPm&&(this.startHour=this.toMilitary(this.timeElements.startHourValueEl.value)),!this.singleDate&&"PM"===this.endAmPm&&(this.endHour=this.toMilitary(this.timeElements.endHourValueEl.value)),12===parseInt(this.timeElements.startHourValueEl.value)&&"AM"===this.startAmPm&&(this.startHour=0),!this.singleDate&&12===parseInt(this.timeElements.endHourValueEl.value)&&"AM"===this.endAmPm&&(this.endHour=0));let t="";this.singleDate||(t=this.dates[1]);let a=this.dates[0];this.dates=[],a&&(this.dates[0]=moment(a).hour(this.startHour).minute(this.startMinute).format(this.format),this.startDateElement.innerHTML=this.dates[0]),t&&!this.singleDate&&(this.dates[1]=moment(t).hour(this.endHour).minute(this.endMinute).format(this.format),this.endDateElement.innerHTML=this.dates[1]),this.onChange()}}value(e,t){if(t&&"string"==typeof t||(t=this.format),"object"==typeof e){if(this.dates=[],e.length&&e[0]?("string"==typeof e[0]&&(e[0]=this.convertStringDate(e[0])),this.dates[0]=moment(e[0]).format(t)):this.defaults&&this.defaults.length?this.dates[0]=moment(this.defaults[0]).format(t):(!this.singleDate&&console.warn("Datepicker.js - WARNING: Use Datepicker.startDate(value) or Datepicker.endDate(value) to set single values. Your date will be set as the start date by default. "),this.dates[0]=moment(e).format(t)),2===e.length&&e[1]?("string"==typeof e[1]&&(e[1]=this.convertStringDate(e[1])),this.dates[1]=moment(e[1]).format(t)):this.defaults&&2===this.defaults.length?this.dates[1]=moment(this.defaults[1]).format(t):this.dates[1]=moment(this.dates[0]).format(t),2===this.dates.length&&moment(this.dates[0])>moment(this.dates[1])){let e=[];console.warn("Datepicker.js - WARNING: Tried to set a startDate greater than endDate, your dates were swapped to be chronologically correct."),e[0]=this.dates[1],e[1]=this.dates[0],this.dates=e}}else if(!e||void 0===typeof e){if(this.dates[0]?this.dates[0]=moment(this.dates[0]).format(t):this.defaults&&this.defaults.length&&(this.dates[0]=moment(this.defaults[0]).format(t)),this.dates[1]?this.dates[1]=moment(this.dates[1]).format(t):this.defaults&&2===this.defaults.length&&(this.dates[1]=moment(this.defaults[1]).format(t)),this.singleDate)return new Date(this.dates[0])||new Date(this.defaults[0]);else{let e=[];return e[0]=new Date(this.dates[0])||new Date(this.defaults[0]),e[1]=new Date(this.dates[1])||new Date(this.defaults[1]),t?[moment(e[0]).format(t),moment(e[1]).format(t)]:e}}else if(("string"==typeof e||"number"==typeof e)&&(this.singleDate||console.warn("Datepicker.js - WARNING: Use Datepicker.startDate(value) or Datepicker.endDate(value) to set single values. Your date will be set as the start date by default. "),this.dates[0]=moment(this.dates[1]).format(t),2===this.dates.length&&moment(this.dates[0])>moment(this.dates[1]))){let e=[];console.warn("Datepicker.js - WARNING: Tried to set a startDate greater than endDate, your dates were swapped to be chronologically correct."),e[0]=this.dates[1],e[1]=this.dates[0],this.dates=e}this.snapTo(this.dates[0]),this.onChange(),this.highlightDates(),this.setTime(),this.calendarElement.hideCalendar(),e[1]&&new Date(e[1])||this.singleDate||e[0]&&new Date(e[0])?e[1]&&new Date(e[1])||this.singleDate?(!e[0]||!new Date(e[0]))&&!this.singleDate&&console.warn("Datepicker.js - WARNING: No start date value provided, or tried to set [start, end] date with invalid or null start date value, start date will be set to default if provided."):console.warn("Datepicker.js - WARNING: No end date value provided, or tried to set [start, end] date with invalid or null end date value, end date will be set to default if provided."):console.warn("Datepicker.js - ERROR: Tried to set dates with invalid format or null values, start/end dates will be set to defaults if provided.")}startDate(e){return void 0!==e&&null!==e&&e?void this.value([e,this.dates[1]||this.defaults[1]||null]):new Date(this.dates[0])}endDate(e){return void 0!==e&&null!==e&&e?void this.value([this.dates[0]||this.defaults[0]||null,e]):new Date(this.dates[1])}nextMonth(e,t){"number"!=typeof t&&(t=1);let a=this.onChange;this.onChange=function(){},this.containerElement.innerHTML="",this.moment.add(t,"months"),this.drawCalendar(),this.drawInputElement(),this.presetMenu&&(this.drawPresetMenu(),this.closePresetMenu()),this.highlightDates(),this.timePicker&&this.setTime(),this.openCalendar(),this.onChange=a,this.calendarPlacement()}lastMonth(e,t){"number"!=typeof t&&(t=-1);let a=this.onChange;this.onChange=function(){},this.containerElement.innerHTML="",this.moment.add(t,"months"),this.drawCalendar(),this.drawInputElement(),this.presetMenu&&(this.drawPresetMenu(),this.closePresetMenu()),this.highlightDates(),this.timePicker&&this.setTime(),this.openCalendar(),this.onChange=a,this.calendarPlacement()}snapTo(e,t){e||(e=this.moment);let a=!!this.max&&moment(this.max).unix(),n=!!this.min&&moment(this.min).unix(),i=moment(e).unix();a&&a<i&&(e=moment(this.max)),e=n&&n>i?moment(this.min):moment(e),this.moment=e;let l=this.onChange;this.onChange=function(){},this.isVisible(this.calendarElement)||t?(this.containerElement.innerHTML="",this.drawCalendar(),this.drawInputElement(),this.presetMenu&&(this.drawPresetMenu(),this.closePresetMenu()),this.timePicker&&this.setTime(!0),this.highlightDates(),this.openCalendar()):(this.containerElement.innerHTML="",this.drawCalendar(),this.drawInputElement(),this.presetMenu&&(this.drawPresetMenu(),this.closePresetMenu()),this.timePicker&&this.setTime(!0),this.highlightDates(),this.closeCalendar()),this.onChange=l,this.calendarPlacement()}toAmPm(e){return e=parseInt(e),12===e?e:0===e?0:11<e?e-12:e}toMilitary(e){return e=parseInt(e),e=12===e?e=0:e,12>e?e+12:e}convertStringDate(e){e=e.split(" ");let t="",a="";for(var n=0;n<e.length;n++)"PM"===e[n].toUpperCase()?(a="PM",e.splice(n,1)):"AM"===e[n].toUpperCase()?(a="AM",e.splice(n,1)):t=t+" "+e[n];let l=moment(t).hour(),r=moment(t);return"PM"===a&&12>l&&r.hour(l+12),r}dayClick(e){if(this.timePicker&&(this.startHour=parseInt(this.timeElements.startHourValueEl.value),this.startMinute=parseInt(this.timeElements.startMinuteValueEl.value),!this.singleDate&&(this.endHour=parseInt(this.timeElements.endHourValueEl.value),this.endMinute=parseInt(this.timeElements.endMinuteValueEl.value)),!this.militaryTime&&("PM"===this.startAmPm&&(this.startHour=this.toMilitary(this.timeElements.startHourValueEl.value)),"PM"===this.endAmPm&&!this.singleDate&&(this.endHour=this.toMilitary(this.timeElements.endHourValueEl.value)),12===parseInt(this.timeElements.startHourValueEl.value)&&"AM"===this.startAmPm&&(this.startHour=0),"AM"===this.endAmPm&&!this.singleDate&&12===parseInt(this.timeElements.endHourValueEl.value)&&(this.endHour=0))),!!this.singleDate)this.dates=[],this.dates[0]=moment(e.value).set({h:this.startHour,m:this.startMinute}).format(this.format),this.startDateElement.innerHTML=this.dates[0];else if(1<this.dates.length||1>this.dates.length)this.dates=[],this.dates[0]=moment(e.value).set({h:this.startHour,m:this.startMinute}).format(this.format),this.timePicker?(this.startDateElement.innerHTML=this.dates[0],this.endDateElement.innerHTML="--/--/----  --:--"):(this.startDateElement.innerHTML=this.dates[0],this.endDateElement.innerHTML="--/--/---- ");else{let t=moment(this.dates[0]).set({h:this.startHour,m:this.startMinute}).unix(),a=moment(e.value).hour(this.endHour).minute(this.endMinute).unix();if(t>a){let t=this.dates[0];this.dates=[],this.dates[1]=moment(t).set({h:this.endHour,m:this.endMinute}).format(this.format),this.dates[0]=moment(e.value).set({h:this.startHour,m:this.startMinute}).format(this.format),this.startDateElement.innerHTML=this.dates[0],this.endDateElement.innerHTML=this.dates[1]}else this.dates[1]=moment(e.value).set({h:this.endHour,m:this.endMinute}).format(this.format),this.endDateElement.innerHTML=this.dates[1]}if(!this.timeValid()){this.startHour=parseInt(this.timeElements.endHourValueEl.value),this.startMinute=parseInt(this.timeElements.endMinuteValueEl.value);let e=this.endMinute,t=this.endHour;this.timeElements.startMinuteValueEl.value=10>e?e+"0":e,this.timeElements.startHourValueEl.value=t,this.setTime()}else this.onChange();!this.singleDate&&2===this.dates.length&&this.options.autoClose?setTimeout(function(){this.closeCalendar()}.bind(this),400):this.singleDate&&1===this.dates.length&&this.options.autoClose&&setTimeout(function(){this.closeCalendar()}.bind(this),400),this.highlightDates(),this.drawInputElement(),(2===this.dates.length||this.singleDate)&&this.options.autoClose&&setTimeout(function(){this.closeCalendar()}.bind(this),700)}isOutsideCalendar(e){return!this.calendarElement.contains(e.target)&&this.isVisible(this.calendarElement)&&!this.inputElement.contains(e.target)&&!e.target.classList.contains("leftArrow")&&!e.target.classList.contains("rightArrow")&&!e.target.classList.contains("decrease-year-button")&&!e.target.classList.contains("increase-year-button")}outsideCalendarClick(e){this.isOutsideCalendar(e)&&(this.closeCalendar(),this.drawInputElement())}calendarPlacement(){let e,t=this,a=t.containerElement.querySelector(".grid-container"),n={windowWidth:window.innerWidth,windowHeight:window.innerHeight,calendarWidth:a.getBoundingClientRect().width,calendarHeight:a.getBoundingClientRect().height,containerHeight:t.containerElement.getBoundingClientRect().height,containerWidth:t.containerElement.getBoundingClientRect().width,datepickerTop:t.containerElement.querySelector(".date").getBoundingClientRect().top,datepickerRight:t.containerElement.querySelector(".date").getBoundingClientRect().right,datepickerLeft:t.containerElement.querySelector(".date").getBoundingClientRect().left,datepickerWidth:t.containerElement.querySelector(".date").getBoundingClientRect().width,datepickerHeight:t.containerElement.querySelector(".date").getBoundingClientRect().height};n.windowWidth-n.datepickerRight<n.calendarWidth+10?(n.datepickerRight=n.datepickerLeft<n.calendarWidth+10?n.datepickerRight-n.datepickerWidth-.5*n.calendarWidth:n.datepickerLeft-n.calendarWidth,e=n.datepickerRight):e=n.datepickerLeft+.5*n.datepickerWidth;let i;n.calendarHeight>n.windowHeight-(n.datepickerTop+n.datepickerHeight)?(n.datepickerTop<n.calendarHeight+n.datepickerHeight?n.datepickerTop=20:n.datepickerTop-=n.calendarHeight,n.datepickerHeight*=.5,i=n.datepickerTop):i=n.datepickerHeight+n.datepickerTop+5,a.setAttribute("style","position: fixed; left:"+e+"px; top: "+i+"px;")}isVisible(e){return!!e&&!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&("grid"===e.style.display||"block"===e.style.display||""===e.style.visibility)}openCalendar(){this.calendarElement.showCalendar(),this.calendarPlacement(),this.highlightDates(),this.calendarPlacement()}closeCalendar(){if(this.onClose(),!this.dates.length&&this.defaults&&this.defaults.length?(this.defaults[0]?(this.dates[0]=moment(this.defaults[0]).format(this.format),this.startDateElement.innerHTML=this.dates[0]):(this.dates[0]=moment().startOf("week").format(this.format),this.startDateElement.innerHTML=this.dates[0]),this.defaults[1]?this.singleDate||(this.dates[1]=moment(this.defaults[1]).format(this.format),this.endDateElement.innerHTML=this.dates[1]):this.singleDate||(this.dates[1]=moment().endOf("week").format(this.format),this.endDateElement.innerHTML=this.dates[1])):this.defaults&&!this.dates.length&&(this.singleDate||(this.dates[1]=moment().endOf("week").format(this.format),this.endDateElement.innerHTML=this.dates[1]),this.dates[0]=moment().startOf("week").format(this.format),this.startDateElement.innerHTML=this.dates[0]),(1===this.dates.length&&this.defaults&&2===this.defaults.length&&this.defaults[1]?this.singleDate||(this.dates[1]=moment(this.defaults[1]).format(this.format),this.endDateElement.innerHTML=this.dates[1],this.startDateElement.innerHTML=this.dates[0]):1===this.dates.length&&this.defaults&&!this.defaults[1]&&(this.singleDate||(this.dates[1]=moment(this.dates[0]).format(this.format),this.endDateElement.innerHTML=this.dates[1],this.startDateElement.innerHTML=this.dates[0])),2===this.dates.length&&moment(this.dates[0])>moment(this.dates[1]))){let e=[];console.warn("Datepicker.js - WARNING: Tried to set a startDate greater than endDate, your dates were swapped to be chronologically correct."),e[0]=this.dates[1],e[1]=this.dates[0],this.dates=e}this.setTime(),this.calendarElement.hideCalendar(),this.drawInputElement()}openPresetMenu(){this.presetMenuContainer.showPresetMenu()}closePresetMenu(){this.presetMenuContainer.hidePresetMenu()}resetCalendar(){this.reset(!0)}reset(e){"undefined"!=typeof e&&e||(e=!1),this.dates=[],this.containerElement.innerHTML="",this.drawCalendar(),this.drawInputElement(),this.presetMenu&&(this.drawPresetMenu(),this.closePresetMenu()),this.onChange(),this.snapTo(new Date),e?setTimeout(this.openCalendar,10):this.closeCalendar()}}